
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>The Photon Collection &#8212; Using the ATLAS xAOD ServiceX Backend</title>
    
  <link href="../_static/css/theme.css" rel="stylesheet" />
  <link href="../_static/css/index.c5995385ac14fb8791e8eb36b4908be2.css" rel="stylesheet" />

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../_static/js/index.1c5a1a01449ed65a7b51.js">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/togglebutton.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/sphinx-book-theme.12a9622fbb08dcb3a2a40b2c02b83a57.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script async="async" src="https://unpkg.com/thebe@0.5.1/lib/index.js"></script>
    <script>
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../_static/logo.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">Using the ATLAS xAOD ServiceX Backend</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../intro.html">
   Using the ATLAS xAOD Typed Backend
  </a>
 </li>
</ul>
<p class="caption" role="heading">
 <span class="caption-text">
  Basics
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="configuration.html">
   Configuration
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="data.html">
   Data Samples
  </a>
 </li>
</ul>
<p class="caption" role="heading">
 <span class="caption-text">
  The Calibrated Collections
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="jets.html">
   The Jet Collection
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="calibration.html">
   Calibration
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="electrons.html">
   The Electron Collection
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="muons.html">
   The Muon Collection
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="taus.html">
   The Tau Collections
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="met.html">
   Missing
   <span class="math notranslate nohighlight">
    \(E_T\)
   </span>
  </a>
 </li>
</ul>
<p class="caption" role="heading">
 <span class="caption-text">
  Uncalibrated Collections
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="tracks.html">
   The Track Collection
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="vertices.html">
   The Vertex Collection
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="eventinfo.html">
   Event Info
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="caloclusters.html">
   Calorimeter Clusters Collection
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="trigger.html">
   Accessing the Trigger
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="truth.html">
   The Truth Particles Collection
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="xaod_objects.html">
   Advanced, Common, Features
  </a>
 </li>
</ul>
<p class="caption" role="heading">
 <span class="caption-text">
  Appendices
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../appendix/calibrations.html">
   Calibrations
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../appendix/py_help.html">
   Using Python Help
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../appendix/old_access.html">
   Old Collection Access Pattern
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../appendix/errors.html">
   Understanding Errors
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../_sources/chapters/photons.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/executablebooks/jupyter-book"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/executablebooks/jupyter-book/issues/new?title=Issue%20on%20page%20%2Fchapters/photons.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/executablebooks/jupyter-book/master?urlpath=tree/docs/chapters/photons.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="../_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        
    </div>
</div>

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#electron-types">
   Electron Types
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#calibration">
   Calibration
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#the-data-model">
   The Data Model
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#further-information">
   Further Information
  </a>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="tex2jax_ignore mathjax_ignore section" id="the-photon-collection">
<h1>The Photon Collection<a class="headerlink" href="#the-photon-collection" title="Permalink to this headline">¶</a></h1>
<p>Photons are, from a reconstruction point-of-view, a lot like electrons. Slightly different calorimeter shape, and, as they are neural, no track associated. Like electrons, there are working points - but only two in this case (<code class="docutils literal notranslate"><span class="pre">Tight</span></code> and <code class="docutils literal notranslate"><span class="pre">Loose</span></code>).</p>
<p>This collection does not work yet - because systematic errors are not possible when running on <code class="docutils literal notranslate"><span class="pre">DAOD_PHYS</span></code> until some software fixes go into the head of the <code class="docutils literal notranslate"><span class="pre">21.2</span></code> release. To follow up, contact Gordon and ask about the photon fudge tool. There were also emails about this on the PAT mailing list.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">config</span> <span class="kn">import</span> <span class="n">ds_zee</span> <span class="k">as</span> <span class="n">ds</span>
<span class="kn">from</span> <span class="nn">helpers</span> <span class="kn">import</span> <span class="n">match_objects</span>
<span class="kn">import</span> <span class="nn">awkward</span> <span class="k">as</span> <span class="nn">ak</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Found backend type matching &quot;xaod&quot;. Matching by type is depreciated. Please switch to using the &quot;name&quot; keyword in your servicex.yaml file.
Found backend type matching &quot;xaod&quot;. Matching by type is depreciated. Please switch to using the &quot;name&quot; keyword in your servicex.yaml file.
Found backend type matching &quot;xaod&quot;. Matching by type is depreciated. Please switch to using the &quot;name&quot; keyword in your servicex.yaml file.
</pre></div>
</div>
</div>
</div>
<p>The default electron we fetch is the so-called <code class="docutils literal notranslate"><span class="pre">Tight</span></code> muon with <code class="docutils literal notranslate"><span class="pre">NonIso</span></code> isolation.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">photons</span> <span class="o">=</span> <span class="p">(</span><span class="n">ds</span>
           <span class="o">.</span><span class="n">SelectMany</span><span class="p">(</span><span class="k">lambda</span> <span class="n">e</span><span class="p">:</span> <span class="n">e</span><span class="o">.</span><span class="n">Photons</span><span class="p">(</span><span class="s2">&quot;Photons&quot;</span><span class="p">,</span> <span class="n">isolation</span><span class="o">=</span><span class="s2">&quot;FixedCutTight&quot;</span><span class="p">))</span>
           <span class="o">.</span><span class="n">Select</span><span class="p">(</span><span class="k">lambda</span> <span class="n">e</span><span class="p">:</span> <span class="n">e</span><span class="o">.</span><span class="n">pt</span><span class="p">()</span> <span class="o">/</span> <span class="mf">1000.0</span><span class="p">)</span>
           <span class="o">.</span><span class="n">AsAwkwardArray</span><span class="p">(</span><span class="s1">&#39;pt&#39;</span><span class="p">)</span>
           <span class="o">.</span><span class="n">value</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Docker image and tag: atlas/analysisbase:21.2.197
Docker Output: 
  Configured GCC from: /opt/lcg/gcc/8.3.0-cebb0/x86_64-centos7/bin/gcc
  Configured AnalysisBase from: /usr/AnalysisBase/21.2.197/InstallArea/x86_64-centos7-gcc8-opt
  -- The C compiler identification is GNU 8.3.0
  -- The CXX compiler identification is GNU 8.3.0
  -- Detecting C compiler ABI info
  -- Detecting C compiler ABI info - done
  -- Check for working C compiler: /opt/lcg/gcc/8.3.0-cebb0/x86_64-centos7/bin/gcc - skipped
  -- Detecting C compile features
  -- Detecting C compile features - done
  -- Detecting CXX compiler ABI info
  -- Detecting CXX compiler ABI info - done
  -- Check for working CXX compiler: /opt/lcg/gcc/8.3.0-cebb0/x86_64-centos7/bin/g++ - skipped
  -- Detecting CXX compile features
  -- Detecting CXX compile features - done
  -- Found AnalysisBase: /usr/AnalysisBase/21.2.197/InstallArea/x86_64-centos7-gcc8-opt (version: 21.2.197)
  -- Found AnalysisBaseExternals: /usr/AnalysisBaseExternals/21.2.197/InstallArea/x86_64-centos7-gcc8-opt (version: 21.2.197)
  -- Setting ATLAS specific build flags
  -- checker_gccplugins library not found
  -- Package(s) in AnalysisBaseExternals: 22
  -- Using the LCG modules without setting up a release
  -- Package(s) in AnalysisBase: 196
  -- Looking for pthread.h
  -- Looking for pthread.h - found
  -- Performing Test CMAKE_HAVE_LIBC_PTHREAD
  -- Performing Test CMAKE_HAVE_LIBC_PTHREAD - Failed
  -- Check if compiler accepts -pthread
  -- Check if compiler accepts -pthread - yes
  -- Found Threads: TRUE  
  -- Configuring ATLAS project with name &quot;UserAnalysis&quot; and version &quot;1.0.0&quot;
  -- Using build type: RelWithDebInfo
  -- Using platform name: x86_64-centos7-gcc8-opt
  -- Cleaning stale files from build area
  -- Unit tests will be built by default
  -- Found 1 package(s)
  -- Considering package 1 / 1
  -- No package filtering rules read
  -- Configuring the build of package: analysis
  -- Number of packages configured: 1
  -- Time for package configuration: 0 seconds
  -- Including the packages from project AnalysisBase - 21.2.197...
  -- Including the packages from project AnalysisBaseExternals - 21.2.197...
  -- Generated file: /workdir/rel/build/x86_64-centos7-gcc8-opt/packages.txt
  -- Generated file: /workdir/rel/build/x86_64-centos7-gcc8-opt/compilers.txt
  -- Generated file: /workdir/rel/build/x86_64-centos7-gcc8-opt/ReleaseData
  -- Generating external environment configuration
  -- Writing runtime environment to file: /workdir/rel/build/x86_64-centos7-gcc8-opt/env_setup.sh
  -- Configuring done
  -- Generating done
  -- Build files have been written to: /workdir/rel/build
  Scanning dependencies of target queryDictDictGen
  [ 11%] Generating queryDictReflexDict.cxx
  [ 11%] Built target queryDictDictGen
  [ 22%] Built UserAnalysisRootMapMerge
  [ 22%] Built target UserAnalysisRootMapMerge
  [ 22%] Built target Package_analysis_tests
  [ 22%] Built target atlas_tests
  [ 33%] Generating ../x86_64-centos7-gcc8-opt/bin/ATestRun_eljob.py
  [ 33%] Built target analysisScriptsInstall
  [ 44%] Building CXX object analysis/CMakeFiles/analysisLib.dir/Root/query.cxx.o
  [ 55%] Linking CXX shared library ../x86_64-centos7-gcc8-opt/lib/libanalysisLib.so
  Detaching debug info of libanalysisLib.so into libanalysisLib.so.dbg
  [ 55%] Built target analysisLib
  [ 66%] Generating ../x86_64-centos7-gcc8-opt/include/analysis
  [ 66%] Built target analysisHeaderInstall
  [ 66%] Built target analysisJobOptInstall
  [ 77%] Building CXX object analysis/CMakeFiles/queryDict.dir/CMakeFiles/queryDictReflexDict.cxx.o
  [ 88%] Linking CXX shared library ../x86_64-centos7-gcc8-opt/lib/libqueryDict.so
  Detaching debug info of libqueryDict.so into libqueryDict.so.dbg
  [ 88%] Built target queryDict
  [100%] Built package analysis
  analysis: Package build succeeded
  [100%] Built target Package_analysis
  xAOD::Init                INFO    Environment initialised for data access
  SampleHandler with 1 files
  Sample:name=ANALYSIS,tags=()
  file:///data/DAOD_PHYS.23294912._000216.pool.root.1
  
  
  /*** AlgSequence/PhotonAnalysisSequence_Tight_FixedCutTight ********************
  | /*** PythonConfig AnaAlgorithm/CP::AsgSelectionAlg/PhotonIsEMSelectorAlg_Tight_FixedCutTight 
  | |- particles: &#39;Photons&#39;
  | |- particlesOut: &#39;Photons_Tight_FixedCutTight_%SYS%_tmp1&#39;
  | |- preselection: &#39;&#39;
  | |- selectionDecoration: &#39;selectEM&#39;
  | |- selectionTool:  
  | | /*** Private Tool CP::AsgFlagSelectionTool/selectionTool ***********************
  | | |- selectionFlags: [&#39;DFCommonPhotonsIsEMTight&#39;]
  | | \--- (End of Private Tool CP::AsgFlagSelectionTool/selectionTool) --------------
  | \--- (End of PythonConfig AnaAlgorithm/CP::AsgSelectionAlg/PhotonIsEMSelectorAlg_Tight_FixedCutTight) 
  | /*** PythonConfig AnaAlgorithm/CP::AsgSelectionAlg/PhotonObjectQualityAlg_Tight_FixedCutTight 
  | |- particles: &#39;Photons_Tight_FixedCutTight_%SYS%_tmp1&#39;
  | |- preselection: &#39;selectEM&#39;
  | |- selectionDecoration: &#39;goodOQ&#39;
  | |- selectionTool:  
  | | /*** Private Tool CP::EgammaIsGoodOQSelectionTool/selectionTool ****************
  | | |- Mask: 34214
  | | \--- (End of Private Tool CP::EgammaIsGoodOQSelectionTool/selectionTool) -------
  | \--- (End of PythonConfig AnaAlgorithm/CP::AsgSelectionAlg/PhotonObjectQualityAlg_Tight_FixedCutTight) 
  | /*** PythonConfig AnaAlgorithm/CP::AsgViewFromSelectionAlg/PhotonPreSelViewFromSelectionAlg_Tight_FixedCutTight 
  | |- input: &#39;Photons_Tight_FixedCutTight_%SYS%_tmp1&#39;
  | |- output: &#39;Photons_Tight_FixedCutTight_%SYS%_tmp2&#39;
  | |- selection: [&#39;selectEM&#39;, &#39;goodOQ&#39;]
  | \--- (End of PythonConfig AnaAlgorithm/CP::AsgViewFromSelectionAlg/PhotonPreSelViewFromSelectionAlg_Tight_FixedCutTight) 
  | /*** PythonConfig AnaAlgorithm/CP::EgammaCalibrationAndSmearingAlg/PhotonCalibrationAndSmearingAlg_Tight_FixedCutTight 
  | |- calibrationAndSmearingTool:  
  | | /*** Private Tool CP::EgammaCalibrationAndSmearingTool/calibrationAndSmearingTool 
  | | |- ESModel: &#39;es2018_R21_v0&#39;
  | | |- decorrelationModel: &#39;1NP_v1&#39;
  | | |- useAFII: 0
  | | \--- (End of Private Tool CP::EgammaCalibrationAndSmearingTool/calibrationAndSmearingTool) 
  | |- egammas: &#39;Photons_Tight_FixedCutTight_%SYS%_tmp2&#39;
  | |- egammasOut: &#39;Photons_Tight_FixedCutTight_%SYS%_tmp3&#39;
  | \--- (End of PythonConfig AnaAlgorithm/CP::EgammaCalibrationAndSmearingAlg/PhotonCalibrationAndSmearingAlg_Tight_FixedCutTight) 
  | /*** PythonConfig AnaAlgorithm/CP::PhotonShowerShapeFudgeAlg/PhotonShowerShapeFudgeAlg_Tight_FixedCutTight 
  | |- photons: &#39;Photons_Tight_FixedCutTight_%SYS%_tmp3&#39;
  | |- photonsOut: &#39;Photons_Tight_FixedCutTight_%SYS%_tmp4&#39;
  | |- showerShapeFudgeTool:  
  | | /*** Private Tool ElectronPhotonShowerShapeFudgeTool/showerShapeFudgeTool ******
  | | |- FFCalibFile: &#39;ElectronPhotonShowerShapeFudgeTool/v2/PhotonFudgeFactors.root&#39;
  | | |- Preselection: 22
  | | \--- (End of Private Tool ElectronPhotonShowerShapeFudgeTool/showerShapeFudgeTool) 
  | \--- (End of PythonConfig AnaAlgorithm/CP::PhotonShowerShapeFudgeAlg/PhotonShowerShapeFudgeAlg_Tight_FixedCutTight) 
  | /*** PythonConfig AnaAlgorithm/CP::EgammaIsolationCorrectionAlg/PhotonIsolationCorrectionAlg_Tight_FixedCutTight 
  | |- egammas: &#39;Photons_Tight_FixedCutTight_%SYS%_tmp4&#39;
  | |- egammasOut: &#39;Photons_Tight_FixedCutTight_%SYS%_tmp5&#39;
  | |- isolationCorrectionTool:  
  | | /*** Private Tool CP::IsolationCorrectionTool/isolationCorrectionTool **********
  | | |- IsMC: 1
  | | \--- (End of Private Tool CP::IsolationCorrectionTool/isolationCorrectionTool) -
  | \--- (End of PythonConfig AnaAlgorithm/CP::EgammaIsolationCorrectionAlg/PhotonIsolationCorrectionAlg_Tight_FixedCutTight) 
  | /*** PythonConfig AnaAlgorithm/CP::EgammaIsolationSelectionAlg/PhotonIsolationSelectionAlg_Tight_FixedCutTight 
  | |- egammas: &#39;Photons_Tight_FixedCutTight_%SYS%_tmp5&#39;
  | |- selectionDecoration: &#39;isolated_Tight_FixedCutTight&#39;
  | |- selectionTool:  
  | | /*** Private Tool CP::IsolationSelectionTool/selectionTool *********************
  | | |- PhotonWP: &#39;FixedCutTight&#39;
  | | \--- (End of Private Tool CP::IsolationSelectionTool/selectionTool) ------------
  | \--- (End of PythonConfig AnaAlgorithm/CP::EgammaIsolationSelectionAlg/PhotonIsolationSelectionAlg_Tight_FixedCutTight) 
  | /*** PythonConfig AnaAlgorithm/CP::PhotonEfficiencyCorrectionAlg/PhotonEfficiencyCorrectionAlg_Tight_FixedCutTight 
  | |- efficiencyCorrectionTool:  
  | | /*** Private Tool AsgPhotonEfficiencyCorrectionTool/efficiencyCorrectionTool ***
  | | |- ForceDataType: 1
  | | |- MapFilePath: &#39;PhotonEfficiencyCorrection/2015_2017/rel21.2/Winter2018_Prerec_v1/map0.txt&#39;
  | | \--- (End of Private Tool AsgPhotonEfficiencyCorrectionTool/efficiencyCorrectionTool) 
  | |- outOfValidity: 2
  | |- outOfValidityDeco: &#39;bad_eff_Tight_FixedCutTight&#39;
  | |- photons: &#39;Photons_Tight_FixedCutTight_%SYS%_tmp5&#39;
  | |- photonsOut: &#39;Photons_Tight_FixedCutTight_%SYS%_tmp6&#39;
  | |- scaleFactorDecoration: &#39;effSF_Tight_FixedCutTight&#39;
  | \--- (End of PythonConfig AnaAlgorithm/CP::PhotonEfficiencyCorrectionAlg/PhotonEfficiencyCorrectionAlg_Tight_FixedCutTight) 
  | /*** PythonConfig AnaAlgorithm/CP::AsgViewFromSelectionAlg/PhotonViewFromSelectionAlg_Tight_FixedCutTight 
  | |- input: &#39;Photons_Tight_FixedCutTight_%SYS%_tmp6&#39;
  | |- output: &#39;Photons_Tight_FixedCutTight_%SYS%&#39;
  | |- selection: [&#39;selectEM&#39;, &#39;goodOQ&#39;, &#39;isolated_Tight_FixedCutTight&#39;, &#39;bad_eff_Tight_FixedCutTight&#39;]
  | \--- (End of PythonConfig AnaAlgorithm/CP::AsgViewFromSelectionAlg/PhotonViewFromSelectionAlg_Tight_FixedCutTight) 
  \--- (End of AlgSequence/PhotonAnalysisSequence_Tight_FixedCutTight) -----------
  &lt;ROOT.EL::Job object at 0x81c09d0&gt;
  Package.EventLoop        INFO    created submission directory /workdir/rel/build/bogus
  Package.EventLoop        INFO    submitting job in /workdir/rel/build/bogus
  Package.EventLoop        INFO    Running sample: ANALYSIS
  Package.EventLoop        INFO    xAODInput = 1
  Package.EventLoop        INFO    calling firstInitialize on all modules
  Package.EventLoop        INFO    calling preFileInitialize on all modules
  xAOD::LoadDictionaries    INFO    xAOD EDM dictionaries loaded
  Package.EventLoop        INFO    Opening file file:///data/DAOD_PHYS.23294912._000216.pool.root.1
  PileupReweightingAlg.p...WARNING No config files provided, but 4 lumicalc file provided. Assuming a period config of MC16 
  CP::TPileupReweighting... INFO    Using MC16 Period configuration
  CP::TPileupReweighting... INFO    Using MC16 Period configuration
  CP::TPileupReweighting... INFO    Using MC16 Period configuration
[TFile::Cp] Total 4.45 MB	|====================| 100.00 % [0.4 MB/s]0.0 MB/s]
  PathResolver             INFO    Successfully downloaded http://cern.ch/atlas-groupdata/GoodRunsLists/data15_13TeV/20170619/PHYS_StandardGRL_All_Good_25ns_276262-284484_OflLumi-13TeV-008.root
  CP::TPileupReweighting... INFO    Adding LumiMetaData (scale factor=0.970874)...
  CP::TPileupReweighting... INFO    Adding LumiMetaData (scale factor=1.010101)...
  CP::TPileupReweighting... INFO    Adding LumiMetaData (scale factor=0.934579)...
  PathResolver             INFO    Successfully downloaded http://cern.ch/atlas-groupdata/GoodRunsLists/data16_13TeV/20180129/PHYS_StandardGRL_All_Good_25ns_297730-311481_OflLumi-13TeV-009.root
[TFile::Cp] Total 17.57 MB	|====================| 100.00 % [0.4 MB/s]0.0 MB/s]
  CP::TPileupReweighting... INFO    Adding LumiMetaData (scale factor=0.970874)...
  CP::TPileupReweighting... INFO    Adding LumiMetaData (scale factor=1.010101)...
  CP::TPileupReweighting... INFO    Adding LumiMetaData (scale factor=0.934579)...
  PathResolver             INFO    Successfully downloaded http://cern.ch/atlas-groupdata/GoodRunsLists/data17_13TeV/20180619/physics_25ns_Triggerno17e33prim.lumicalc.OflLumi-13TeV-010.root
[TFile::Cp] Total 16.57 MB	|====================| 100.00 % [0.5 MB/s]0.0 MB/s]
  CP::TPileupReweighting... INFO    Adding LumiMetaData (scale factor=0.970874)...
  CP::TPileupReweighting... INFO    Adding LumiMetaData (scale factor=1.010101)...
  CP::TPileupReweighting... INFO    Adding LumiMetaData (scale factor=0.934579)...
  PathResolver             INFO    Successfully downloaded http://cern.ch/atlas-groupdata/GoodRunsLists/data18_13TeV/20190708/ilumicalc_histograms_None_348885-364292_OflLumi-13TeV-010.root
[TFile::Cp] Total 17.49 MB	|====================| 100.00 % [0.3 MB/s]0.0 MB/s]
  CP::TPileupReweighting... INFO    Adding LumiMetaData (scale factor=0.970874)...
  CP::TPileupReweighting... INFO    Adding LumiMetaData (scale factor=1.010101)...
  CP::TPileupReweighting... INFO    Adding LumiMetaData (scale factor=0.934579)...
  DefaultWeightTool        INFO    AsgTool DefaultWeightTool @ 0x12fd5070
  PhotonObjectQualityAlg...INFO    Selecting e/gamma objects with OQ mask: 0x85a6
  PhotonCalibrationAndSm...INFO    Initialization
  PathResolver             INFO    Successfully downloaded http://cern.ch/atlas-groupdata/ElectronPhotonFourMomentumCorrection/v24/egammaEnergyCorrectionData.root
[TFile::Cp] Total 0.59 MB	|====================| 100.00 % [0.2 MB/s]0.0 MB/s]
  PathResolver             INFO    Successfully downloaded http://cern.ch/atlas-groupdata/ElectronPhotonFourMomentumCorrection/v8/histos-systematics-material.root
[TFile::Cp] Total 0.16 MB	|====================| 100.00 % [0.2 MB/s]0.0 MB/s]
  eg_resolution            INFO    Initialize eg_resolution
[TFile::Cp] Total 0.01 MB	|====================| 100.00 % [0.0 MB/s]0.0 MB/s]
  PathResolver             INFO    Successfully downloaded http://cern.ch/atlas-groupdata/ElectronPhotonFourMomentumCorrection/v20/resolutionFit_electron_run2_release21_es2017_R21_v1.root
[TFile::Cp] Total 0.01 MB	|====================| 100.00 % [0.0 MB/s]0.0 MB/s]
  PathResolver             INFO    Successfully downloaded http://cern.ch/atlas-groupdata/ElectronPhotonFourMomentumCorrection/v20/resolutionFit_recoUnconv_run2_release21_es2017_R21_v1.root
[TFile::Cp] Total 0.01 MB	|====================| 100.00 % [0.0 MB/s]0.0 MB/s]
  PathResolver             INFO    Successfully downloaded http://cern.ch/atlas-groupdata/ElectronPhotonFourMomentumCorrection/v20/resolutionFit_recoConv_run2_release21_es2017_R21_v1.root
  PathResolver             INFO    Successfully downloaded http://cern.ch/atlas-groupdata/ElectronPhotonFourMomentumCorrection/v20/resolutionFit_trueUnconvertedPhoton_run2_release21_es2017_R21_v1.root
[TFile::Cp] Total 0.01 MB	|====================| 100.00 % [0.0 MB/s]0.0 MB/s]
[TFile::Cp] Total 0.01 MB	|====================| 100.00 % [0.0 MB/s]0.0 MB/s]
  PathResolver             INFO    Successfully downloaded http://cern.ch/atlas-groupdata/ElectronPhotonFourMomentumCorrection/v8/PP0sys.root
[TFile::Cp] Total 0.02 MB	|====================| 100.00 % [0.0 MB/s]0.0 MB/s]
  PathResolver             INFO    Successfully downloaded http://cern.ch/atlas-groupdata/ElectronPhotonFourMomentumCorrection/v8/wstot_related_syst.root
  PathResolver             INFO    Successfully downloaded http://cern.ch/atlas-groupdata/ElectronPhotonFourMomentumCorrection/v8/FunctionsTO.root
[TFile::Cp] Total 0.02 MB	|====================| 100.00 % [0.0 MB/s]0.0 MB/s]
[TFile::Cp] Total 0.05 MB	|====================| 100.00 % [0.1 MB/s]0.0 MB/s]
  PathResolver             INFO    Successfully downloaded http://cern.ch/atlas-groupdata/ElectronPhotonFourMomentumCorrection/v8/FunctionsG_all.root
[TFile::Cp] Total 0.01 MB	|====================| 100.00 % [0.0 MB/s]0.0 MB/s]
  PathResolver             INFO    Successfully downloaded http://cern.ch/atlas-groupdata/ElectronPhotonFourMomentumCorrection/v14/gain_uncertainty_specialRun.root
  GainUncertainty          INFO    opening file ./ElectronPhotonFourMomentumCorrection/v14/gain_uncertainty_specialRun.root
[TFile::Cp] Total 0.02 MB	|====================| 100.00 % [0.1 MB/s]0.0 MB/s]
  PathResolver             INFO    Successfully downloaded http://cern.ch/atlas-groupdata/ElectronPhotonFourMomentumCorrection/v8/e1hg_systematics_histos.root
  egammaMVACalib           INFO    Accessing calibration from egammaMVACalib/offline/v7
  egammaMVACalib           INFO    Reading weights from egammaMVACalib/offline/v7
[TFile::Cp] Total 2.27 MB	|====================| 100.00 % [0.4 MB/s]0.0 MB/s]
  PathResolver             INFO    Successfully downloaded http://cern.ch/atlas-groupdata/egammaMVACalib/offline/v7/MVACalib_electron.weights.root
  egammaMVACalib           INFO    117 readers created
  egammaMVACalib           INFO    egammaMVACalib::printReadersInfo 100 eta bin(s) -- ( 0 &lt; abs(el_cl_eta) &lt; 2.5
  egammaMVACalib           INFO    egammaMVACalib::printReadersInfo 100 energy bin(s) -- ( 0  &lt; (el_rawcl_Es1 + el_rawcl_Es2 + el_rawcl_Es3)/cosh(el_cl_eta) &lt; 50000GeV
  egammaMVACalib           INFO    Number of variables:10
  EgammaMVATool            INFO    Using layer correction
  EgammaMVATool            INFO    10 variables for electrons
  MVATreeElectron          INFO    creating tree for 10 variables: el_cl_E,el_cl_E_TileGap3,el_cl_eta,el_cl_etaCalo,el_cl_phi,el_cl_phiCalo,el_rawcl_Es0,el_rawcl_Es1,el_rawcl_Es2,el_rawcl_Es3
  egammaMVACalib           INFO    Variable that defines particleType not set. Using default formula: ph_Rconv &gt; 0. &amp;&amp; ph_Rconv &lt; 800.
  egammaMVACalib           INFO    Accessing calibration from egammaMVACalib/offline/v7
  egammaMVACalib           INFO    Reading weights from egammaMVACalib/offline/v7
[TFile::Cp] Total 2.47 MB	|====================| 100.00 % [0.8 MB/s]0.0 MB/s]
  PathResolver             INFO    Successfully downloaded http://cern.ch/atlas-groupdata/egammaMVACalib/offline/v7/MVACalib_unconvertedPhoton.weights.root
[TFile::Cp] Total 2.55 MB	|====================| 100.00 % [0.7 MB/s]0.0 MB/s]
  PathResolver             INFO    Successfully downloaded http://cern.ch/atlas-groupdata/egammaMVACalib/offline/v7/MVACalib_convertedPhoton.weights.root
  egammaMVACalib           INFO    234 readers created
  egammaMVACalib           INFO    egammaMVACalib::printReadersInfo 100 eta bin(s) -- ( 0 &lt; abs(ph_cl_eta) &lt; 2.5
  egammaMVACalib           INFO    egammaMVACalib::printReadersInfo 100 energy bin(s) -- ( 0  &lt; (ph_rawcl_Es1 + ph_rawcl_Es2 + ph_rawcl_Es3)/cosh(ph_cl_eta) &lt; 50000GeV
  egammaMVACalib           INFO    Number of variables:14
  EgammaMVATool            INFO    configuration does not contain list of variables, try to guess:
  EgammaMVATool            INFO    18 variables for photons
  EgammaMVATool            INFO      ph_Rconv
  EgammaMVATool            INFO      ph_cl_E
  EgammaMVATool            INFO      ph_cl_E_TileGap3
  EgammaMVATool            INFO      ph_cl_eta
  EgammaMVATool            INFO      ph_cl_etaCalo
  EgammaMVATool            INFO      ph_cl_phi
  EgammaMVATool            INFO      ph_cl_phiCalo
  EgammaMVATool            INFO      ph_convtrk1nPixHits
  EgammaMVATool            INFO      ph_convtrk1nSCTHits
  EgammaMVATool            INFO      ph_convtrk2nPixHits
  EgammaMVATool            INFO      ph_convtrk2nSCTHits
  EgammaMVATool            INFO      ph_pt1conv
  EgammaMVATool            INFO      ph_pt2conv
  EgammaMVATool            INFO      ph_ptconv
  EgammaMVATool            INFO      ph_rawcl_Es0
  EgammaMVATool            INFO      ph_rawcl_Es1
  EgammaMVATool            INFO      ph_rawcl_Es2
  EgammaMVATool            INFO      ph_rawcl_Es3
  MVATreePhoton            INFO    creating tree for 18 variables: ph_Rconv,ph_cl_E,ph_cl_E_TileGap3,ph_cl_eta,ph_cl_etaCalo,ph_cl_phi,ph_cl_phiCalo,ph_convtrk1nPixHits,ph_convtrk1nSCTHits,ph_convtrk2nPixHits,ph_convtrk2nSCTHits,ph_pt1conv,ph_pt2conv,ph_ptconv,ph_rawcl_Es0,ph_rawcl_Es1,ph_rawcl_Es2,ph_rawcl_Es3
  egammaLayerRecalibTool   INFO    using scale es2017_21.0_v0
  egammaLayerRecalibTool   INFO    using scale run2_alt_with_layer2_r21_v0
  egammaLayerRecalibTool   INFO    using scale layer2_alt_run2_r21_v0
[TFile::Cp] Total 0.02 MB	|====================| 100.00 % [0.1 MB/s]0.0 MB/s]
  PathResolver             INFO    Successfully downloaded http://cern.ch/atlas-groupdata/egammaLayerRecalibTool/v5/egammaLayerRecalibTunes.root
  egammaLayerRecalibTool   INFO    using scale ps_2016_r21_v0
  PhotonCalibrationAndSm...INFO    ESModel: es2018_R21_v0
  PhotonCalibrationAndSm...INFO    ResolutionType: SigmaEff90
  PhotonCalibrationAndSm...INFO    layer correction = 2
  PhotonCalibrationAndSm...INFO    PS correction = 2
  PhotonCalibrationAndSm...INFO    S12 correction = 2
  PhotonCalibrationAndSm...INFO    layer2 recalibration = 2
  PhotonCalibrationAndSm...INFO    intermodule correction = 1
  PhotonCalibrationAndSm...INFO    phi uniformity correction = 1
  PhotonCalibrationAndSm...INFO    gain correction = 0
  PhotonCalibrationAndSm...INFO    smearing = 2
  PhotonCalibrationAndSm...INFO    insitu scales = 2
  PhotonCalibrationAndSm...INFO    ep combination = 0
  PhotonCalibrationAndSm...INFO    use MVA calibration = 2
  PhotonCalibrationAndSm...INFO    use temperature correction 2015 = 2
  PhotonCalibrationAndSm...INFO    use uA2MeV correction 2015 1/2 week = 2
  PhotonShowerShapeFudge...INFO    No config file set! Using default shift values for the electron shifter.
  PathResolver             INFO    Successfully downloaded http://cern.ch/atlas-groupdata/ElectronPhotonShowerShapeFudgeTool/v2/PhotonFudgeFactors.root
  FudgeMCTool               INFO    Path found = ./ElectronPhotonShowerShapeFudgeTool/v2/PhotonFudgeFactors.root
[TFile::Cp] Total 0.60 MB	|====================| 100.00 % [0.3 MB/s]0.0 MB/s]
  PhotonIsolationCorrect...INFO    in initialize of PhotonIsolationCorrectionAlg_Tight_FixedCutTight.isolationCorrectionTool...
  PathResolver             INFO    Successfully downloaded http://cern.ch/atlas-groupdata/IsolationCorrections/v5/isolation_ptcorrections_rel20_2.root
  PhotonIsolationCorrect...INFO     Path found = ./IsolationCorrections/v5/isolation_ptcorrections_rel20_2.root
[TFile::Cp] Total 0.14 MB	|====================| 100.00 % [0.3 MB/s]0.0 MB/s]
  PathResolver             INFO    Successfully downloaded http://cern.ch/atlas-groupdata/IsolationCorrections/v3/isolation_ddcorrection_shift.root
  PhotonIsolationCorrect...INFO     Path found = ./IsolationCorrections/v3/isolation_ddcorrection_shift.root
[TFile::Cp] Total 0.09 MB	|====================| 100.00 % [0.2 MB/s]0.0 MB/s]
[TFile::Cp] Total 0.04 MB	|====================| 100.00 % [0.1 MB/s]0.0 MB/s]
  PathResolver             INFO    Successfully downloaded http://cern.ch/atlas-groupdata/IsolationCorrections/v1/isolation_ddcorrection_smearing.root
  PhotonIsolationCorrect...INFO     Path found = ./IsolationCorrections/v1/isolation_ddcorrection_smearing.root
[TFile::Cp] Total 0.08 MB	|====================| 100.00 % [0.1 MB/s]0.0 MB/s]
  PathResolver             INFO    Successfully downloaded http://cern.ch/atlas-groupdata/ElectronIsolationSelection/v1/CaloDeltaRZ.root
  PhotonIsolationSelecti...INFO    Initialising...
[TFile::Cp] Total 0.31 MB	|====================| 100.00 % [0.1 MB/s]0.0 MB/s]
  PathResolver             INFO    Successfully downloaded http://cern.ch/atlas-groupdata/IsolationSelection/v2/MC15_Z_Jpsi_cutMap.root
  PhotonIsolationSelecti...INFO    Reading input file IsolationSelection/v2/MC15_Z_Jpsi_cutMap.root from ./IsolationSelection/v2/MC15_Z_Jpsi_cutMap.root
  PhotonIsolationSelecti...INFO    VersionInfo:2015_Sep_29_v2a
  PathResolver             INFO    Successfully downloaded http://cern.ch/atlas-groupdata/PhotonEfficiencyCorrection/2015_2017/rel21.2/Winter2018_Prerec_v1/map0.txt
[TFile::Cp] Total 0.00 MB	|====================| 100.00 % [0.0 MB/s]0.0 MB/s]
  PathResolver             INFO    Successfully downloaded http://cern.ch/atlas-groupdata/PhotonEfficiencyCorrection/2015_2017/rel21.2/Winter2018_Prerec_v1/PIDSF/efficiencySF.offline.Tight.13TeV.rel21.25ns.con.v00.root
  PhotonEfficiencyCorrec...INFO     Using path = ./PhotonEfficiencyCorrection/2015_2017/rel21.2/Winter2018_Prerec_v1/PIDSF/efficiencySF.offline.Tight.13TeV.rel21.25ns.con.v00.root
[TFile::Cp] Total 0.00 MB	|====================| 100.00 % [0.0 MB/s]0.0 MB/s]
  PathResolver             INFO    Successfully downloaded http://cern.ch/atlas-groupdata/PhotonEfficiencyCorrection/2015_2017/rel21.2/Winter2018_Prerec_v1/PIDSF/efficiencySF.offline.Tight.13TeV.rel21.25ns.unc.v00.root
  PhotonEfficiencyCorrec...INFO     Using path = ./PhotonEfficiencyCorrection/2015_2017/rel21.2/Winter2018_Prerec_v1/PIDSF/efficiencySF.offline.Tight.13TeV.rel21.25ns.unc.v00.root
[TFile::Cp] Total 0.00 MB	|====================| 100.00 % [0.0 MB/s]0.0 MB/s]
  PhotonIsolationCorrect...INFO    is MC = 1, use AFII = 0
  Package.EventLoop        INFO    Processing events 0-40000 in file file:///data/DAOD_PHYS.23294912._000216.pool.root.1
  CP::TPileupReweighting... INFO    Initializing the subtool..
  PhotonShowerShapeFudge...ERROR   /build/atnight/localbuilds/nightlies/AnalysisBase/21.2/athena/PhysicsAnalysis/ElectronPhotonID/ElectronPhotonShowerShapeFudgeTool/Root/ElectronPhotonShowerShapeFudgeTool.cxx:163 (virtual const CP::CorrectionCode ElectronPhotonShowerShapeFudgeTool::applyCorrection(xAOD::Photon&amp;) const): Could not retrieve all shower shapes
  Package.EventLoopComp_...ERROR   /build/atnight/localbuilds/nightlies/AnalysisBase/21.2/athena/PhysicsAnalysis/D3PDTools/AnaAlgorithm/Root/AnaAlgorithmWrapper.cxx:88 (virtual StatusCode EL::AnaAlgorithmWrapper::execute()): failed to call execute() on algorithm: PhotonShowerShapeFudgeAlg_Tight_FixedCutTight
  Package.EventLoop        ERROR   /build/atnight/localbuilds/nightlies/AnalysisBase/21.2/athena/PhysicsAnalysis/D3PDTools/EventLoop/Root/Worker.cxx:647 (StatusCode EL::Worker::algsExecute()): while calling execute() on algorithm PhotonShowerShapeFudgeAlg_Tight_FixedCutTight
  Package.EventLoop        ERROR   /build/atnight/localbuilds/nightlies/AnalysisBase/21.2/athena/PhysicsAnalysis/D3PDTools/EventLoop/Root/Worker.cxx:523 (StatusCode EL::Worker::processEvents(EL::EventRange&amp;)): processing event 1 on file DAOD_PHYS.23294912._000216.pool.root.1
  Package.EventLoop        ERROR   /build/atnight/localbuilds/nightlies/AnalysisBase/21.2/athena/PhysicsAnalysis/D3PDTools/EventLoop/Root/Worker.cxx:769 (StatusCode EL::Worker::directExecute(const SH::SamplePtr&amp;, const EL::Job&amp;, const string&amp;, const SH::MetaObject&amp;)): Failed to call &quot;processEvents (eventRange)&quot;
  Package.EventLoop        ERROR   /build/atnight/localbuilds/nightlies/AnalysisBase/21.2/athena/PhysicsAnalysis/D3PDTools/EventLoop/Root/DirectDriver.cxx:81 (virtual StatusCode EL::DirectDriver::doManagerStep(EL::Detail::ManagerData&amp;) const): Failed to call &quot;worker.directExecute (*sample, *data.job, data.submitDir, data.options)&quot;
  Package.EventLoop        ERROR   /build/atnight/localbuilds/nightlies/AnalysisBase/21.2/athena/PhysicsAnalysis/D3PDTools/EventLoop/Root/ManagerData.cxx:67 (StatusCode EL::Detail::ManagerData::run()): while performing manager step 14
  Package.EventLoop        ERROR   /build/atnight/localbuilds/nightlies/AnalysisBase/21.2/athena/PhysicsAnalysis/D3PDTools/EventLoop/Root/ManagerData.cxx:68 (StatusCode EL::Detail::ManagerData::run()): on submission directory /workdir/rel/build/bogus
  (stderr) Traceback (most recent call last):
  (stderr)   File &quot;../source/analysis/share/ATestRun_eljob.py&quot;, line 91, in &lt;module&gt;
  (stderr)     driver.submit(job, options.submission_dir)
  (stderr) Exception: string EL::Driver::submit(const EL::Job&amp; job, const string&amp; location) =&gt;
  (stderr)     failed to submit job (C++ exception of type runtime_error)
  
ATestRun_eljob.py:
  #
  # Read the submission directory as a command line argument. You can
  # extend the list of arguments with your private ones later on.
  # Set up (Py)ROOT.
  import ROOT  # type: ignore
  import optparse
  from AnaAlgorithm.DualUseConfig import createAlgorithm  # type: ignore
  
  parser = optparse.OptionParser()
  
  ROOT.xAOD.Init().ignore()
  parser.add_option(&#39;-s&#39;, &#39;--submission-dir&#39;, dest=&#39;submission_dir&#39;,
                    action=&#39;store&#39;, type=&#39;string&#39;, default=&#39;submitDir&#39;,
                    help=&#39;Submission directory for EventLoop&#39;)
  (options, args) = parser.parse_args()
  
  
  # The sample handler is going to load the files form filelist.txt,
  # in this context, it is an embarrassingly easy use of that object.
  sh = ROOT.SH.SampleHandler()
  sh.setMetaString(&#39;nc_tree&#39;, &#39;CollectionTree&#39;)
  ROOT.SH.readFileList(sh, &quot;ANALYSIS&quot;, &quot;filelist.txt&quot;)
  sh.printContent()
  
  # Create an EventLoop job.
  job = ROOT.EL.Job()
  job.sampleHandler(sh)
  
  
  # pulled from:https://gitlab.cern.ch/atlas/athena/-/blob/21.2/PhysicsAnalysis/Algorithms/JetAnalysisAlgorithms/python/JetAnalysisAlgorithmsTest.py 
  
  # Set up the systematics loader/handler service:
  
  from AnaAlgorithm.DualUseConfig import createService
  
  from AnaAlgorithm.AlgSequence import AlgSequence
  
  calibrationAlgSeq = AlgSequence()
  
  sysService = createService( &#39;CP::SystematicsSvc&#39;, &#39;SystematicsSvc&#39;, sequence = calibrationAlgSeq )
  
  sysService.systematicsList = [&#39;NOSYS&#39;]
  
  # Add sequence to job
  
  from AsgAnalysisAlgorithms.PileupAnalysisSequence import makePileupAnalysisSequence
  
  from AsgAnalysisAlgorithms.AsgAnalysisAlgorithmsTest import pileupConfigFiles
  
  prwfiles, lumicalcfiles = pileupConfigFiles(&#39;mc&#39;)
  
  # Can&#39;t use pwrfiles, lumicalcfiles b.c. they are on cvms and docker does not have those.
  
  # pileupSequence = makePileupAnalysisSequence( &#39;mc&#39;, userPileupConfigs=prwfiles, userLumicalcFiles=lumicalcfiles)
  
  pileupSequence = makePileupAnalysisSequence( &#39;mc&#39; )
  
  pileupSequence.configure( inputName = {}, outputName = {} )
  
  # print( pileupSequence ) # For debugging
  
  calibrationAlgSeq += pileupSequence
  
  from EgammaAnalysisAlgorithms.PhotonAnalysisSequence import makePhotonAnalysisSequence
  
  electronSequence = makePhotonAnalysisSequence( &#39;mc&#39;, &#39;Tight.FixedCutTight&#39;, postfix = &#39;Tight_FixedCutTight&#39;)
  
  electronSequence.configure( inputName = &#39;Photons&#39;,
  
                              outputName = &#39;Photons_Tight_FixedCutTight_%SYS%&#39; )
  
  calibrationAlgSeq += electronSequence
  
  print( electronSequence ) # For debugging
  
  calibrationAlgSeq.addSelfToJob( job )
  
  print(job) # for debugging
  
  
  # Create the algorithm&#39;s configuration.
  alg = createAlgorithm(&#39;query&#39;, &#39;AnalysisAlg&#39;)
  # later on we&#39;ll add some configuration options for our algorithm that go here
  
  # Add our algorithm to the job
  job.algsAdd(alg)
  job.outputAdd(ROOT.EL.OutputStream(&#39;ANALYSIS&#39;))
  
  # Run the job using the direct driver.
  driver = ROOT.EL.DirectDriver()
  driver.submit(job, options.submission_dir)
filelist.txt:
  /data/DAOD_PHYS.23294912._000216.pool.root.1
  
package_CMakeLists.txt:
  # The name of the package:
  atlas_subdir (analysis)
  
  # Add the shared library:
  atlas_add_library (analysisLib
    analysis/*.h Root/*.cxx
    PUBLIC_HEADERS analysis
    LINK_LIBRARIES AnaAlgorithmLib xAODEgamma )
  
  if (XAOD_STANDALONE)
   # Add the dictionary (for AnalysisBase only):
   atlas_add_dictionary (queryDict
    analysis/query.h
    analysis/selection.xml
    LINK_LIBRARIES analysisLib)
  endif ()
  
  if (NOT XAOD_STANDALONE)
    # Add a component library for AthAnalysis only:
    atlas_add_component (analysis
      src/components/*.cxx
      LINK_LIBRARIES analysisLib)
  endif ()
  
  # Install files from the package:
  atlas_install_joboptions( share/*_jobOptions.py )
  atlas_install_scripts( share/*_eljob.py )
query.cxx:
  #include &lt;AsgTools/MessageCheck.h&gt;
  #include &lt;analysis/query.h&gt;
  #include &quot;xAODRootAccess/tools/TFileAccessTracer.h&quot;
  
  
  #include &quot;xAODEgamma/PhotonContainer.h&quot;
  
  #include &quot;xAODEgamma/versions/Photon_v1.h&quot;
  
  
  #include &lt;TTree.h&gt;
  
  query :: query (const std::string&amp; name,
                                    ISvcLocator *pSvcLocator)
      : EL::AnaAlgorithm (name, pSvcLocator)
  {
    // Here you put any code for the base initialization of variables,
    // e.g. initialize all pointers to 0.  This is also where you
    // declare all properties for your algorithm.  Note that things like
    // resetting statistics variables or booking histograms should
    // rather go into the initialize() function.
  
    // Turn off file access statistics reporting. This is, according to Attila, useful
    // for GRID jobs, but not so much for other jobs. For those of us not located at CERN
    // and for a large amount of data, this can sometimes take a minute.
    // So we get rid of it.
    xAOD::TFileAccessTracer::enableDataSubmission(false);
  }
  
  StatusCode query :: initialize ()
  {
    // Here you do everything that needs to be done at the very
    // beginning on each worker node, e.g. create histograms and output
    // trees.  This method gets called before any input files are
    // connected.
  
    
    {
    
      ANA_CHECK (book (TTree (&quot;treeme&quot;, &quot;My analysis ntuple&quot;)));
    
      auto myTree = tree (&quot;treeme&quot;);
    
      myTree-&gt;Branch(&quot;pt&quot;, &amp;_pt6);
    
    }
    
  
    return StatusCode::SUCCESS;
  }
  
  StatusCode query :: execute ()
  {
    // Here you do everything that needs to be done on every single
    // events, e.g. read input variables, apply cuts, and fill
    // histograms and trees.  This is where most of your actual analysis
    // code will go.
  
    
    {
    
      const DataVector&lt;xAOD::Photon_v1&gt;* photons4;
    
      {
    
        const DataVector&lt;xAOD::Photon_v1&gt;* result = 0;
    
        ANA_CHECK (evtStore()-&gt;retrieve(result, &quot;Photons_Tight_FixedCutTight_NOSYS&quot;));
    
        photons4 = result;
    
      }
    
      for (auto &amp;&amp;i_obj5 : *photons4)
    
      {
    
        _pt6 = (i_obj5-&gt;pt()/1000.0);
    
        tree(&quot;treeme&quot;)-&gt;Fill();
    
      }
    
    }
    
  
    return StatusCode::SUCCESS;
  }
  
  
  
  StatusCode query :: finalize ()
  {
    // This method is the mirror image of initialize(), meaning it gets
    // called after the last event has been processed on the worker node
    // and allows you to finish up any objects you created in
    // initialize() before they are written to disk.  This is actually
    // fairly rare, since this happens separately for each worker node.
    // Most of the time you want to do your post-processing on the
    // submission node after all your histogram outputs have been
    // merged.
    return StatusCode::SUCCESS;
  }
query.h:
  #ifndef analysis_query_H
  #define analysis_query_H
  
  #include &lt;AnaAlgorithm/AnaAlgorithm.h&gt;
  
  class query : public EL::AnaAlgorithm
  {
  public:
    // this is a standard algorithm constructor
    query (const std::string&amp; name, ISvcLocator* pSvcLocator);
  
    // these are the functions inherited from Algorithm
    virtual StatusCode initialize () override;
    virtual StatusCode execute () override;
    virtual StatusCode finalize () override;
  
  private:
    // Class level variables
  
    
    double _pt6;
  
    
  
  };
  
  #endif
runner.sh:
  #!/bin/env bash
  
  # If any problem occurs during the running of this script we want to bail and make sure that
  # everyone above us knows what happened.
  set -e
  
  # Meant to be invokved in an ATLAS R21 analysis container.
  # This follows the tutorial from https://atlassoftwaredocs.web.cern.ch/ABtutorial/release_setup/
  
  # Parse the command line arguments. Our defaults
  output_method=&quot;cp&quot;
  output_dir=&quot;/results&quot;
  input_method=&quot;filelist&quot;
  input_file=&quot;&quot;
  compile=1
  run=1
  
  while getopts &quot;d:o:cr&quot; opt; do
      case &quot;$opt&quot; in
      d)
          input_method=&quot;cmd&quot;
          input_file=$OPTARG
          ;;
      c)
          run=0
          ;;
      r)
          compile=0
          ;;
      o)
          output_dir=$OPTARG
          ;;
      ?)
          exit 10
      esac
  done
  
  # If there are any arguments left over, then very bad things have happened.
  shift $((OPTIND-1))
  if [ $# != 0 ]; then
    echo &quot;Extra arguments on the command line $@&quot;
    exit 1
  fi
  
  # Setup and config
  source /home/atlas/release_setup.sh
  
  # Remember where we are and the script location.
  DIR=&quot;$( cd &quot;$( dirname &quot;${BASH_SOURCE[0]}&quot; )&quot; &gt;/dev/null 2&gt;&amp;1 &amp;&amp; pwd )&quot;
  local=`pwd`
  
  # Create a release directory
  if [ $compile = 1 ]; then
     mkdir rel
     cd rel
     mkdir source
     mkdir build
     mkdir run
  
  # Create cmake infrastructure
     cat &gt; source/CMakeLists.txt &lt;&lt; &#39;EOF&#39;
  #
  # Project configuration for UserAnalysis.
  #
  project(func_adl_ntupler)
  
  # Set the minimum required CMake version:
  cmake_minimum_required( VERSION 3.4 FATAL_ERROR )
  
  # Try to figure out what project is our parent. Just using a hard-coded list
  # of possible project names. Basically the names of all the other
  # sub-directories inside the Projects/ directory in the repository.
  set( _parentProjectNames Athena AthenaP1 AnalysisBase AthAnalysis
     AthSimulation AthDerivation AnalysisTop )
  set( _defaultParentProject AnalysisBase )
  foreach( _pp ${_parentProjectNames} )
     if( NOT &quot;$ENV{${_pp}_DIR}&quot; STREQUAL &quot;&quot; )
        set( _defaultParentProject ${_pp} )
        break()
     endif()
  endforeach()
  
  # Set the parent project name based on the previous findings:
  set( ATLAS_PROJECT ${_defaultParentProject}
     CACHE STRING &quot;The name of the parent project to build against&quot; )
  
  # Clean up:
  unset( _parentProjectNames )
  unset( _defaultParentProject )
  
  # Find the AnalysisBase project. This is what, amongst other things, pulls
  # in the definition of all of the &quot;atlas_&quot; prefixed functions/macros.
  find_package( ${ATLAS_PROJECT} REQUIRED )
  
  # Set up CTest. This makes sure that per-package build log files can be
  # created if the user so chooses.
  atlas_ctest_setup()
  
  # Set up the GitAnalysisTutorial project. With this CMake will look for &quot;packages&quot;
  # in the current repository and all of its submodules, respecting the
  # &quot;package_filters.txt&quot; file, and set up the build of those packages.
  atlas_project( UserAnalysis 1.0.0
     USE ${ATLAS_PROJECT} ${${ATLAS_PROJECT}_VERSION} )
  
  # Set up the runtime environment setup script. This makes sure that the
  # project&#39;s &quot;setup.sh&quot; script can set up a fully functional runtime environment,
  # including all the externals that the project uses.
  lcg_generate_env( SH_FILE ${CMAKE_BINARY_DIR}/${ATLAS_PLATFORM}/env_setup.sh )
  install( FILES ${CMAKE_BINARY_DIR}/${ATLAS_PLATFORM}/env_setup.sh
     DESTINATION . )
  
  # Set up CPack. This call makes sure that an RPM or TGZ file can be created
  # from the built project. Used by Panda to send the project to the grid worker
  # nodes.
  atlas_cpack_setup()
  EOF
  
     # Create a package infrastructure
     cd source
     mkdir analysis
     mkdir analysis/analysis
     mkdir analysis/Root
     mkdir analysis/src
     mkdir analysis/src/components
     mkdir analysis/share
  
     # Create the basics for cmake
     cp $DIR/package_CMakeLists.txt analysis/CMakeLists.txt
  
     # Next, copy over the algorithm. The source directory needs to be correctly mounted.
     cp $DIR/query.h analysis/analysis
     cp $DIR/query.cxx analysis/Root
     cp $DIR/ATestRun_eljob.py analysis/share
     chmod +x analysis/share/ATestRun_eljob.py
  
     cat &gt; analysis/analysis/queryDict.h &lt;&lt; EOF
  #ifndef analysis_query_DICT_H
  #define analysis_query_DICT_H
  
  // This file includes all the header files that you need to create
  // dictionaries for.
  
  #include &lt;analysis/query.h&gt;
  
  #endif
  EOF
  
     cat &gt; analysis/analysis/selection.xml &lt;&lt; EOF
  &lt;lcgdict&gt;
  
    &lt;!-- This file contains a list of all classes for which a dictionary
         should be created. --&gt;
  
    &lt;class name=&quot;query&quot; /&gt;
     
  &lt;/lcgdict&gt;
  EOF
  
  
     # Do the build
     cd ../build
     cmake ../source
     make
  else
     cd rel/build
  fi
  
  # Sort out the input file location
  if [ $run = 1 ]; then
     source ${AnalysisBaseExternals_PLATFORM}/setup.sh
     if [ &quot;$input_method&quot; == &quot;filelist&quot; ]; then
        if [ -e $DIR/filelist.txt ]; then
           cp $DIR/filelist.txt .
        else
           cp $local/filelist.txt .
        fi
     elif [ &quot;$input_method&quot; == &quot;cmd&quot; ]; then
        echo $input_file &gt; filelist.txt
     fi
  
     # Do the run
     if [ -e ./bogus ]; then
       rm -rf bogus
     fi
     python ../source/analysis/share/ATestRun_eljob.py --submission-dir=bogus
  
     # Place the output file where it belongs
     if [ $output_method == &quot;cp&quot; ]; then
        cmd=&quot;cp&quot;
        destination=$output_dir
     else
        destination=$1
        cmd=&quot;cp&quot;
        if [[ $destination == &quot;root:&quot;* ]]; then
           cmd=&quot;xrdcp&quot;
        fi
     fi
     $cmd ./bogus/data-ANALYSIS/ANALYSIS.root $destination
  fi
</pre></div>
</div>
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">DockerException</span><span class="g g-Whitespace">                           </span>Traceback (most recent call last)
<span class="o">~</span>\<span class="n">AppData</span>\<span class="n">Local</span>\<span class="n">Temp</span><span class="o">/</span><span class="n">ipykernel_13692</span><span class="o">/</span><span class="mf">1153516772.</span><span class="n">py</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">photons</span> <span class="o">=</span> <span class="p">(</span><span class="n">ds</span>
<span class="g g-Whitespace">      </span><span class="mi">2</span>            <span class="o">.</span><span class="n">SelectMany</span><span class="p">(</span><span class="k">lambda</span> <span class="n">e</span><span class="p">:</span> <span class="n">e</span><span class="o">.</span><span class="n">Photons</span><span class="p">(</span><span class="s2">&quot;Photons&quot;</span><span class="p">,</span> <span class="n">isolation</span><span class="o">=</span><span class="s2">&quot;FixedCutTight&quot;</span><span class="p">))</span>
<span class="g g-Whitespace">      </span><span class="mi">3</span>            <span class="o">.</span><span class="n">Select</span><span class="p">(</span><span class="k">lambda</span> <span class="n">e</span><span class="p">:</span> <span class="n">e</span><span class="o">.</span><span class="n">pt</span><span class="p">()</span> <span class="o">/</span> <span class="mf">1000.0</span><span class="p">)</span>
<span class="g g-Whitespace">      </span><span class="mi">4</span>            <span class="o">.</span><span class="n">AsAwkwardArray</span><span class="p">(</span><span class="s1">&#39;pt&#39;</span><span class="p">)</span>
<span class="g g-Whitespace">      </span><span class="mi">5</span>            <span class="o">.</span><span class="n">value</span><span class="p">())</span>

<span class="nn">~\AppData\Local\pypoetry\Cache\virtualenvs\xaod-usage-w68Kx7k0-py3.9\lib\site-packages\make_it_sync\func_wrapper.py</span> in <span class="ni">wrapped_call</span><span class="nt">(*args, **kwargs)</span>
<span class="g g-Whitespace">     </span><span class="mi">61</span>         <span class="nd">@wraps</span><span class="p">(</span><span class="n">fn</span><span class="p">)</span>
<span class="g g-Whitespace">     </span><span class="mi">62</span>         <span class="k">def</span> <span class="nf">wrapped_call</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="ne">---&gt; </span><span class="mi">63</span>             <span class="k">return</span> <span class="n">_sync_version_of_function</span><span class="p">(</span><span class="n">fn</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<span class="g g-Whitespace">     </span><span class="mi">64</span> 
<span class="g g-Whitespace">     </span><span class="mi">65</span>         <span class="k">return</span> <span class="n">wrapped_call</span>

<span class="nn">~\AppData\Local\pypoetry\Cache\virtualenvs\xaod-usage-w68Kx7k0-py3.9\lib\site-packages\make_it_sync\func_wrapper.py</span> in <span class="ni">_sync_version_of_function</span><span class="nt">(fn, *args, **kwargs)</span>
<span class="g g-Whitespace">     </span><span class="mi">24</span>         <span class="n">future</span> <span class="o">=</span> <span class="n">exector</span><span class="o">.</span><span class="n">submit</span><span class="p">(</span><span class="n">get_data_wrapper</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<span class="g g-Whitespace">     </span><span class="mi">25</span> 
<span class="ne">---&gt; </span><span class="mi">26</span>         <span class="k">return</span> <span class="n">future</span><span class="o">.</span><span class="n">result</span><span class="p">()</span>
<span class="g g-Whitespace">     </span><span class="mi">27</span> 
<span class="g g-Whitespace">     </span><span class="mi">28</span> 

<span class="nn">~\AppData\Local\Programs\Python\Python39\lib\concurrent\futures\_base.py</span> in <span class="ni">result</span><span class="nt">(self, timeout)</span>
<span class="g g-Whitespace">    </span><span class="mi">443</span>                     <span class="k">raise</span> <span class="n">CancelledError</span><span class="p">()</span>
<span class="g g-Whitespace">    </span><span class="mi">444</span>                 <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_state</span> <span class="o">==</span> <span class="n">FINISHED</span><span class="p">:</span>
<span class="ne">--&gt; </span><span class="mi">445</span>                     <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__get_result</span><span class="p">()</span>
<span class="g g-Whitespace">    </span><span class="mi">446</span>                 <span class="k">else</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">447</span>                     <span class="k">raise</span> <span class="ne">TimeoutError</span><span class="p">()</span>

<span class="nn">~\AppData\Local\Programs\Python\Python39\lib\concurrent\futures\_base.py</span> in <span class="ni">__get_result</span><span class="nt">(self)</span>
<span class="g g-Whitespace">    </span><span class="mi">388</span>         <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_exception</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">389</span>             <span class="k">try</span><span class="p">:</span>
<span class="ne">--&gt; </span><span class="mi">390</span>                 <span class="k">raise</span> <span class="bp">self</span><span class="o">.</span><span class="n">_exception</span>
<span class="g g-Whitespace">    </span><span class="mi">391</span>             <span class="k">finally</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">392</span>                 <span class="c1"># Break a reference cycle with the exception in self._exception</span>

<span class="nn">~\AppData\Local\Programs\Python\Python39\lib\concurrent\futures\thread.py</span> in <span class="ni">run</span><span class="nt">(self)</span>
<span class="g g-Whitespace">     </span><span class="mi">50</span> 
<span class="g g-Whitespace">     </span><span class="mi">51</span>         <span class="k">try</span><span class="p">:</span>
<span class="ne">---&gt; </span><span class="mi">52</span>             <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fn</span><span class="p">(</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">)</span>
<span class="g g-Whitespace">     </span><span class="mi">53</span>         <span class="k">except</span> <span class="ne">BaseException</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
<span class="g g-Whitespace">     </span><span class="mi">54</span>             <span class="bp">self</span><span class="o">.</span><span class="n">future</span><span class="o">.</span><span class="n">set_exception</span><span class="p">(</span><span class="n">exc</span><span class="p">)</span>

<span class="nn">~\AppData\Local\pypoetry\Cache\virtualenvs\xaod-usage-w68Kx7k0-py3.9\lib\site-packages\make_it_sync\func_wrapper.py</span> in <span class="ni">get_data_wrapper</span><span class="nt">(*args, **kwargs)</span>
<span class="g g-Whitespace">     </span><span class="mi">19</span>             <span class="n">asyncio</span><span class="o">.</span><span class="n">set_event_loop</span><span class="p">(</span><span class="n">loop</span><span class="p">)</span>
<span class="g g-Whitespace">     </span><span class="mi">20</span>             <span class="k">assert</span> <span class="ow">not</span> <span class="n">loop</span><span class="o">.</span><span class="n">is_running</span><span class="p">()</span>
<span class="ne">---&gt; </span><span class="mi">21</span>             <span class="k">return</span> <span class="n">loop</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">fn</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">))</span>
<span class="g g-Whitespace">     </span><span class="mi">22</span> 
<span class="g g-Whitespace">     </span><span class="mi">23</span>         <span class="n">exector</span> <span class="o">=</span> <span class="n">ThreadPoolExecutor</span><span class="p">(</span><span class="n">max_workers</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="nn">~\AppData\Local\Programs\Python\Python39\lib\asyncio\base_events.py</span> in <span class="ni">run_until_complete</span><span class="nt">(self, future)</span>
<span class="g g-Whitespace">    </span><span class="mi">640</span>             <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s1">&#39;Event loop stopped before Future completed.&#39;</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">641</span> 
<span class="ne">--&gt; </span><span class="mi">642</span>         <span class="k">return</span> <span class="n">future</span><span class="o">.</span><span class="n">result</span><span class="p">()</span>
<span class="g g-Whitespace">    </span><span class="mi">643</span> 
<span class="g g-Whitespace">    </span><span class="mi">644</span>     <span class="k">def</span> <span class="nf">stop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

<span class="nn">c:\users\gordo\code\iris-hep\func_adl\func_adl\object_stream.py</span> in <span class="ni">value_async</span><span class="nt">(self, executor, title)</span>
<span class="g g-Whitespace">    </span><span class="mi">292</span> 
<span class="g g-Whitespace">    </span><span class="mi">293</span>         <span class="c1"># Run it</span>
<span class="ne">--&gt; </span><span class="mi">294</span>         <span class="k">return</span> <span class="k">await</span> <span class="n">exe</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_q_ast</span><span class="p">,</span> <span class="n">title</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">295</span> 
<span class="g g-Whitespace">    </span><span class="mi">296</span>     <span class="n">value</span> <span class="o">=</span> <span class="n">make_sync</span><span class="p">(</span><span class="n">value_async</span><span class="p">)</span>

<span class="nn">c:\users\gordo\code\iris-hep\func_adl_servicex\func_adl_servicex\ServiceX.py</span> in <span class="ni">execute_result_async</span><span class="nt">(self, a, title)</span>
<span class="g g-Whitespace">    </span><span class="mi">176</span>         <span class="c1"># Run ghe query for real!</span>
<span class="g g-Whitespace">    </span><span class="mi">177</span>         <span class="n">attr</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_ds</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
<span class="ne">--&gt; </span><span class="mi">178</span>         <span class="k">return</span> <span class="k">await</span> <span class="n">attr</span><span class="p">(</span><span class="n">q_str</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">179</span> 
<span class="g g-Whitespace">    </span><span class="mi">180</span> 

<span class="nn">~\AppData\Local\pypoetry\Cache\virtualenvs\xaod-usage-w68Kx7k0-py3.9\lib\site-packages\servicex\servicex_utils.py</span> in <span class="ni">cached_version_of_fn</span><span class="nt">(*args, **kwargs)</span>
<span class="g g-Whitespace">     </span><span class="mi">47</span>         <span class="k">try</span><span class="p">:</span>
<span class="g g-Whitespace">     </span><span class="mi">48</span>             <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">h</span><span class="si">}</span><span class="s1"> - processing request&#39;</span><span class="p">)</span>
<span class="ne">---&gt; </span><span class="mi">49</span>             <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">fn</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<span class="g g-Whitespace">     </span><span class="mi">50</span>             <span class="n">sx</span><span class="o">.</span><span class="n">_cache</span><span class="o">.</span><span class="n">set_inmem</span><span class="p">(</span><span class="n">h</span><span class="p">,</span> <span class="n">result</span><span class="p">)</span>
<span class="g g-Whitespace">     </span><span class="mi">51</span>         <span class="k">finally</span><span class="p">:</span>

<span class="nn">~\AppData\Local\pypoetry\Cache\virtualenvs\xaod-usage-w68Kx7k0-py3.9\lib\site-packages\servicex\servicex.py</span> in <span class="ni">get_data_awkward_async</span><span class="nt">(self, selection_query, title)</span>
<span class="g g-Whitespace">    </span><span class="mi">334</span>     <span class="k">async</span> <span class="k">def</span> <span class="nf">get_data_awkward_async</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">selection_query</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">335</span>                                      <span class="n">title</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="ne">--&gt; </span><span class="mi">336</span>         <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_converter</span><span class="o">.</span><span class="n">combine_awkward</span><span class="p">(</span><span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data_return</span><span class="p">(</span>
<span class="g g-Whitespace">    </span><span class="mi">337</span>             <span class="n">selection_query</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">f</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_converter</span><span class="o">.</span><span class="n">convert_to_awkward</span><span class="p">(</span><span class="n">f</span><span class="p">),</span>
<span class="g g-Whitespace">    </span><span class="mi">338</span>             <span class="n">title</span><span class="p">))</span>

<span class="nn">~\AppData\Local\pypoetry\Cache\virtualenvs\xaod-usage-w68Kx7k0-py3.9\lib\site-packages\backoff\_async.py</span> in <span class="ni">retry</span><span class="nt">(*args, **kwargs)</span>
<span class="g g-Whitespace">    </span><span class="mi">131</span> 
<span class="g g-Whitespace">    </span><span class="mi">132</span>             <span class="k">try</span><span class="p">:</span>
<span class="ne">--&gt; </span><span class="mi">133</span>                 <span class="n">ret</span> <span class="o">=</span> <span class="k">await</span> <span class="n">target</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">134</span>             <span class="k">except</span> <span class="n">exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">135</span>                 <span class="n">giveup_result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">giveup</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

<span class="nn">~\AppData\Local\pypoetry\Cache\virtualenvs\xaod-usage-w68Kx7k0-py3.9\lib\site-packages\backoff\_async.py</span> in <span class="ni">retry</span><span class="nt">(*args, **kwargs)</span>
<span class="g g-Whitespace">    </span><span class="mi">131</span> 
<span class="g g-Whitespace">    </span><span class="mi">132</span>             <span class="k">try</span><span class="p">:</span>
<span class="ne">--&gt; </span><span class="mi">133</span>                 <span class="n">ret</span> <span class="o">=</span> <span class="k">await</span> <span class="n">target</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">134</span>             <span class="k">except</span> <span class="n">exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">135</span>                 <span class="n">giveup_result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">giveup</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

<span class="nn">~\AppData\Local\pypoetry\Cache\virtualenvs\xaod-usage-w68Kx7k0-py3.9\lib\site-packages\servicex\servicex.py</span> in <span class="ni">_data_return</span><span class="nt">(self, selection_query, converter, title, data_format)</span>
<span class="g g-Whitespace">    </span><span class="mi">524</span>                                 <span class="n">on</span> <span class="n">the</span> <span class="n">converter</span> <span class="n">call</span><span class="o">.</span>
<span class="g g-Whitespace">    </span><span class="mi">525</span>         <span class="sd">&#39;&#39;&#39;</span>
<span class="ne">--&gt; </span><span class="mi">526</span><span class="sd">         all_data = {</span>
<span class="g g-Whitespace">    </span><span class="mi">527</span><span class="sd">             f.file: f.data</span>
<span class="nn">    528             async for f</span> in <span class="ni">self._stream_return</span><span class="nt">(selection_query, title, converter, data_format)</span>

<span class="nn">~\AppData\Local\pypoetry\Cache\virtualenvs\xaod-usage-w68Kx7k0-py3.9\lib\site-packages\servicex\servicex.py</span> in <span class="ni">&lt;dictcomp&gt;</span><span class="nt">(.0)</span>
<span class="g g-Whitespace">    </span><span class="mi">524</span><span class="sd">                                 on the converter call.</span>
<span class="g g-Whitespace">    </span><span class="mi">525</span><span class="sd">         &#39;&#39;&#39;</span>
<span class="ne">--&gt; </span><span class="mi">526</span>         <span class="n">all_data</span> <span class="o">=</span> <span class="p">{</span>
<span class="g g-Whitespace">    </span><span class="mi">527</span>             <span class="n">f</span><span class="o">.</span><span class="n">file</span><span class="p">:</span> <span class="n">f</span><span class="o">.</span><span class="n">data</span>
<span class="nn">    528             async for f</span> in <span class="ni">self._stream_return</span><span class="nt">(selection_query, title, converter, data_format)</span>

<span class="nn">~\AppData\Local\pypoetry\Cache\virtualenvs\xaod-usage-w68Kx7k0-py3.9\lib\site-packages\servicex\servicex.py</span> in <span class="ni">_stream_return</span><span class="nt">(self, selection_query, title, converter, data_format)</span>
<span class="g g-Whitespace">    </span><span class="mi">563</span>                    <span class="bp">self</span><span class="o">.</span><span class="n">_stream_local_files</span><span class="p">(</span><span class="n">selection_query</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">data_format</span><span class="p">))</span>  <span class="c1"># type: ignore</span>
<span class="g g-Whitespace">    </span><span class="mi">564</span> 
<span class="ne">--&gt; </span><span class="mi">565</span>         <span class="k">async</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">as_data</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">566</span>             <span class="k">yield</span> <span class="n">r</span>
<span class="g g-Whitespace">    </span><span class="mi">567</span> 

<span class="nn">~\AppData\Local\pypoetry\Cache\virtualenvs\xaod-usage-w68Kx7k0-py3.9\lib\site-packages\servicex\servicex.py</span> in <span class="ni">&lt;genexpr&gt;</span><span class="nt">(.0)</span>
<span class="g g-Whitespace">    </span><span class="mi">559</span>                                 <span class="n">on</span> <span class="n">the</span> <span class="n">converter</span> <span class="n">call</span><span class="o">.</span>
<span class="g g-Whitespace">    </span><span class="mi">560</span>         <span class="s1">&#39;&#39;&#39;</span>
<span class="ne">--&gt; </span><span class="mi">561</span><span class="s1">         as_data = (StreamInfoData(f.file, await asyncio.ensure_future(converter(f.path)))</span>
<span class="g g-Whitespace">    </span><span class="mi">562</span><span class="s1">                    async for f in</span>
<span class="g g-Whitespace">    </span><span class="mi">563</span><span class="s1">                    self._stream_local_files(selection_query, title, data_format))  # type: ignore</span>

<span class="nn">~\AppData\Local\pypoetry\Cache\virtualenvs\xaod-usage-w68Kx7k0-py3.9\lib\site-packages\servicex\servicex.py</span> in <span class="ni">_stream_local_files</span><span class="nt">(self, selection_query, title, data_format)</span>
<span class="g g-Whitespace">    </span><span class="mi">596</span><span class="s1">              self._get_files(selection_query, data_format, notifier, title))  # type: ignore</span>
<span class="g g-Whitespace">    </span><span class="mi">597</span><span class="s1"> </span>
<span class="ne">--&gt; </span><span class="mi">598</span><span class="s1">         async for name, a_path in as_files:</span>
<span class="g g-Whitespace">    </span><span class="mi">599</span><span class="s1">             yield StreamInfoPath(name, Path(await a_path))</span>
<span class="g g-Whitespace">    </span><span class="mi">600</span><span class="s1"> </span>

<span class="nn">~\AppData\Local\pypoetry\Cache\virtualenvs\xaod-usage-w68Kx7k0-py3.9\lib\site-packages\servicex\servicex.py</span> in <span class="ni">&lt;genexpr&gt;</span><span class="nt">(.0)</span>
<span class="g g-Whitespace">    </span><span class="mi">593</span><span class="s1">         # Get all the files</span>
<span class="g g-Whitespace">    </span><span class="mi">594</span><span class="s1">         as_files = </span><span class="se">\</span>
<span class="ne">--&gt; </span><span class="mi">595</span><span class="s1">             (f async for f in</span>
<span class="g g-Whitespace">    </span><span class="mi">596</span><span class="s1">              self._get_files(selection_query, data_format, notifier, title))  # type: ignore</span>
<span class="g g-Whitespace">    </span><span class="mi">597</span><span class="s1"> </span>

<span class="nn">~\AppData\Local\pypoetry\Cache\virtualenvs\xaod-usage-w68Kx7k0-py3.9\lib\site-packages\servicex\servicex.py</span> in <span class="ni">_get_files</span><span class="nt">(self, selection_query, data_type, notifier, title)</span>
<span class="g g-Whitespace">    </span><span class="mi">633</span><span class="s1"> </span>
<span class="g g-Whitespace">    </span><span class="mi">634</span><span class="s1">             # Get a request id - which might be cached, but if not, submit it.</span>
<span class="ne">--&gt; </span><span class="mi">635</span><span class="s1">             request_id = await self._get_request_id(client, query)</span>
<span class="g g-Whitespace">    </span><span class="mi">636</span><span class="s1"> </span>
<span class="g g-Whitespace">    </span><span class="mi">637</span><span class="s1">             # Make sure cache status exists (user could have deleted, see #176)</span>

<span class="nn">~\AppData\Local\pypoetry\Cache\virtualenvs\xaod-usage-w68Kx7k0-py3.9\lib\site-packages\servicex\servicex.py</span> in <span class="ni">_get_request_id</span><span class="nt">(self, client, query)</span>
<span class="g g-Whitespace">    </span><span class="mi">685</span><span class="s1">         request_id = self._cache.lookup_query(query)</span>
<span class="g g-Whitespace">    </span><span class="mi">686</span><span class="s1">         if request_id is None:</span>
<span class="ne">--&gt; </span><span class="mi">687</span><span class="s1">             request_info = await self._servicex_adaptor.submit_query(client, query)</span>
<span class="g g-Whitespace">    </span><span class="mi">688</span><span class="s1">             request_id = request_info[&#39;request_id&#39;]</span>
<span class="g g-Whitespace">    </span><span class="mi">689</span><span class="s1">             self._cache.set_query(query, request_id)</span>

<span class="nn">c:\users\gordo\code\iris-hep\func_adl_servicex\func_adl_servicex\local_dataset.py</span> in <span class="ni">submit_query</span><span class="nt">(self, _, json_query)</span>
<span class="g g-Whitespace">     </span><span class="mi">90</span><span class="s1">         query = json_query[&#39;selection&#39;]</span>
<span class="g g-Whitespace">     </span><span class="mi">91</span><span class="s1">         title = json_query[&#39;title&#39;] if &#39;title&#39; in json_query else &#39;&#39;</span>
<span class="ne">---&gt; </span><span class="mi">92</span><span class="s1">         file_list = await self._ds.execute_result_async(</span>
<span class="g g-Whitespace">     </span><span class="mi">93</span><span class="s1">             text_ast_to_python_ast(query).body[0].value,</span>
<span class="g g-Whitespace">     </span><span class="mi">94</span><span class="s1">             title</span>

<span class="nn">c:\users\gordo\code\iris-hep\func_adl_xaod\func_adl_xAOD\common\local_dataset.py</span> in <span class="ni">execute_result_async</span><span class="nt">(self, a, title)</span>
<span class="g g-Whitespace">    </span><span class="mi">138</span><span class="s1">             except python_on_whales.exceptions.DockerException as e:</span>
<span class="g g-Whitespace">    </span><span class="mi">139</span><span class="s1">                 self._dump_info(logging.ERROR, output, local_run_dir, f_spec.main_script, self._docker_image)</span>
<span class="ne">--&gt; </span><span class="mi">140</span><span class="s1">                 raise e</span>
<span class="g g-Whitespace">    </span><span class="mi">141</span><span class="s1"> </span>
<span class="g g-Whitespace">    </span><span class="mi">142</span><span class="s1">             # Now that we have run, we can pluck out the result.</span>

<span class="nn">c:\users\gordo\code\iris-hep\func_adl_xaod\func_adl_xAOD\common\local_dataset.py</span> in <span class="ni">execute_result_async</span><span class="nt">(self, a, title)</span>
<span class="g g-Whitespace">    </span><span class="mi">129</span><span class="s1">                     stream=True,</span>
<span class="g g-Whitespace">    </span><span class="mi">130</span><span class="s1">                 )</span>
<span class="ne">--&gt; </span><span class="mi">131</span><span class="s1">                 for stream_type, stream_content in output_generator:</span>
<span class="g g-Whitespace">    </span><span class="mi">132</span><span class="s1">                     if stream_type == &#39;stdout&#39;:</span>
<span class="g g-Whitespace">    </span><span class="mi">133</span><span class="s1">                         output += f&#39;{stream_content.decode()}&#39;</span>

<span class="nn">~\AppData\Local\pypoetry\Cache\virtualenvs\xaod-usage-w68Kx7k0-py3.9\lib\site-packages\python_on_whales\utils.py</span> in <span class="ni">stream_stdout_and_stderr</span><span class="nt">(full_cmd, env)</span>
<span class="g g-Whitespace">    </span><span class="mi">230</span><span class="s1">     exit_code = process.wait()</span>
<span class="g g-Whitespace">    </span><span class="mi">231</span><span class="s1">     if exit_code != 0:</span>
<span class="ne">--&gt; </span><span class="mi">232</span><span class="s1">         raise DockerException(full_cmd, exit_code, stderr=full_stderr)</span>
<span class="g g-Whitespace">    </span><span class="mi">233</span><span class="s1"> </span>
<span class="g g-Whitespace">    </span><span class="mi">234</span><span class="s1"> </span>

<span class="ne">DockerException</span>: The docker command executed was `C:\Program Files\Docker\Docker\resources\bin\docker.EXE container run --rm --volume C:\Users\gordo\AppData\Local\Temp\tmpwre1dqab:/scripts:ro --volume C:\Users\gordo\AppData\Local\Temp\tmpwre1dqab:/results: --volume C:\Users\gordo\Code\atlas\data\R21\DAOD_PHYS\361106:/data/:ro atlas/analysisbase:21.2.197 /scripts/runner.sh`.
<span class="s1">It returned with code 1</span>
<span class="s1">The content of stdout can be found above the stacktrace (it wasn&#39;t captured).</span>
<span class="s1">The content of stderr is &#39;[TFile::Cp] Total 4.45 MB	|&gt;...................| 0.00 % [0.0 MB/s]</span>
<span class="s1">[TFile::Cp] Total 4.45 MB	|====&gt;...............| 21.43 % [0.8 MB/s]</span>
<span class="s1">[TFile::Cp] Total 4.45 MB	|========&gt;...........| 42.86 % [0.6 MB/s]</span>
<span class="s1">[TFile::Cp] Total 4.45 MB	|============&gt;.......| 64.28 % [0.5 MB/s]</span>
<span class="s1">[TFile::Cp] Total 4.45 MB	|=================&gt;..| 85.71 % [0.4 MB/s]</span>
<span class="s1">[TFile::Cp] Total 4.45 MB	|====================| 100.00 % [0.4 MB/s]</span>
<span class="s1">[TFile::Cp] Total 17.57 MB	|&gt;...................| 0.00 % [0.0 MB/s]</span>
<span class="s1">[TFile::Cp] Total 17.57 MB	|=&gt;..................| 5.43 % [0.3 MB/s]</span>
<span class="s1">[TFile::Cp] Total 17.57 MB	|==&gt;.................| 10.86 % [0.4 MB/s]</span>
<span class="s1">[TFile::Cp] Total 17.57 MB	|===&gt;................| 16.28 % [0.4 MB/s]</span>
<span class="s1">[TFile::Cp] Total 17.57 MB	|====&gt;...............| 21.71 % [0.4 MB/s]</span>
<span class="s1">[TFile::Cp] Total 17.57 MB	|=====&gt;..............| 27.14 % [0.4 MB/s]</span>
<span class="s1">[TFile::Cp] Total 17.57 MB	|======&gt;.............| 32.57 % [0.3 MB/s]</span>
<span class="s1">[TFile::Cp] Total 17.57 MB	|=======&gt;............| 37.99 % [0.3 MB/s]</span>
<span class="s1">[TFile::Cp] Total 17.57 MB	|========&gt;...........| 43.42 % [0.3 MB/s]</span>
<span class="s1">[TFile::Cp] Total 17.57 MB	|=========&gt;..........| 48.85 % [0.3 MB/s]</span>
<span class="s1">[TFile::Cp] Total 17.57 MB	|==========&gt;.........| 54.28 % [0.3 MB/s]</span>
<span class="s1">[TFile::Cp] Total 17.57 MB	|===========&gt;........| 59.71 % [0.3 MB/s]</span>
<span class="s1">[TFile::Cp] Total 17.57 MB	|=============&gt;......| 65.13 % [0.3 MB/s]</span>
<span class="s1">[TFile::Cp] Total 17.57 MB	|==============&gt;.....| 70.56 % [0.3 MB/s]</span>
<span class="s1">[TFile::Cp] Total 17.57 MB	|===============&gt;....| 75.99 % [0.3 MB/s]</span>
<span class="s1">[TFile::Cp] Total 17.57 MB	|================&gt;...| 81.42 % [0.3 MB/s]</span>
<span class="s1">[TFile::Cp] Total 17.57 MB	|=================&gt;..| 86.85 % [0.4 MB/s]</span>
<span class="s1">[TFile::Cp] Total 17.57 MB	|==================&gt;.| 92.27 % [0.4 MB/s]</span>
<span class="s1">[TFile::Cp] Total 17.57 MB	|===================&gt;| 97.70 % [0.4 MB/s]</span>
<span class="s1">[TFile::Cp] Total 17.57 MB	|====================| 100.00 % [0.4 MB/s]</span>
<span class="s1">[TFile::Cp] Total 16.57 MB	|&gt;...................| 0.00 % [0.0 MB/s]</span>
<span class="s1">[TFile::Cp] Total 16.57 MB	|=&gt;..................| 5.76 % [0.5 MB/s]</span>
<span class="s1">[TFile::Cp] Total 16.57 MB	|==&gt;.................| 11.51 % [0.4 MB/s]</span>
<span class="s1">[TFile::Cp] Total 16.57 MB	|===&gt;................| 17.27 % [0.4 MB/s]</span>
<span class="s1">[TFile::Cp] Total 16.57 MB	|====&gt;...............| 23.03 % [0.5 MB/s]</span>
<span class="s1">[TFile::Cp] Total 16.57 MB	|=====&gt;..............| 28.78 % [0.5 MB/s]</span>
<span class="s1">[TFile::Cp] Total 16.57 MB	|======&gt;.............| 34.54 % [0.5 MB/s]</span>
<span class="s1">[TFile::Cp] Total 16.57 MB	|========&gt;...........| 40.29 % [0.6 MB/s]</span>
<span class="s1">[TFile::Cp] Total 16.57 MB	|=========&gt;..........| 46.05 % [0.6 MB/s]</span>
<span class="s1">[TFile::Cp] Total 16.57 MB	|==========&gt;.........| 51.81 % [0.5 MB/s]</span>
<span class="s1">[TFile::Cp] Total 16.57 MB	|===========&gt;........| 57.56 % [0.5 MB/s]</span>
<span class="s1">[TFile::Cp] Total 16.57 MB	|============&gt;.......| 63.32 % [0.5 MB/s]</span>
<span class="s1">[TFile::Cp] Total 16.57 MB	|=============&gt;......| 69.08 % [0.5 MB/s]</span>
<span class="s1">[TFile::Cp] Total 16.57 MB	|==============&gt;.....| 74.83 % [0.5 MB/s]</span>
<span class="s1">[TFile::Cp] Total 16.57 MB	|================&gt;...| 80.59 % [0.5 MB/s]</span>
<span class="s1">[TFile::Cp] Total 16.57 MB	|=================&gt;..| 86.35 % [0.5 MB/s]</span>
<span class="s1">[TFile::Cp] Total 16.57 MB	|==================&gt;.| 92.10 % [0.5 MB/s]</span>
<span class="s1">[TFile::Cp] Total 16.57 MB	|===================&gt;| 97.86 % [0.5 MB/s]</span>
<span class="s1">[TFile::Cp] Total 16.57 MB	|====================| 100.00 % [0.5 MB/s]</span>
<span class="s1">[TFile::Cp] Total 17.49 MB	|&gt;...................| 0.00 % [0.0 MB/s]</span>
<span class="s1">[TFile::Cp] Total 17.49 MB	|=&gt;..................| 5.45 % [0.3 MB/s]</span>
<span class="s1">[TFile::Cp] Total 17.49 MB	|==&gt;.................| 10.90 % [0.3 MB/s]</span>
<span class="s1">[TFile::Cp] Total 17.49 MB	|===&gt;................| 16.35 % [0.3 MB/s]</span>
<span class="s1">[TFile::Cp] Total 17.49 MB	|====&gt;...............| 21.81 % [0.3 MB/s]</span>
<span class="s1">[TFile::Cp] Total 17.49 MB	|=====&gt;..............| 27.26 % [0.3 MB/s]</span>
<span class="s1">[TFile::Cp] Total 17.49 MB	|======&gt;.............| 32.71 % [0.3 MB/s]</span>
<span class="s1">[TFile::Cp] Total 17.49 MB	|=======&gt;............| 38.16 % [0.3 MB/s]</span>
<span class="s1">[TFile::Cp] Total 17.49 MB	|========&gt;...........| 43.61 % [0.3 MB/s]</span>
<span class="s1">[TFile::Cp] Total 17.49 MB	|=========&gt;..........| 49.06 % [0.3 MB/s]</span>
<span class="s1">[TFile::Cp] Total 17.49 MB	|==========&gt;.........| 54.51 % [0.3 MB/s]</span>
<span class="s1">[TFile::Cp] Total 17.49 MB	|===========&gt;........| 59.97 % [0.3 MB/s]</span>
<span class="s1">[TFile::Cp] Total 17.49 MB	|=============&gt;......| 65.42 % [0.3 MB/s]</span>
<span class="s1">[TFile::Cp] Total 17.49 MB	|==============&gt;.....| 70.87 % [0.3 MB/s]</span>
<span class="s1">[TFile::Cp] Total 17.49 MB	|===============&gt;....| 76.32 % [0.3 MB/s]</span>
<span class="s1">[TFile::Cp] Total 17.49 MB	|================&gt;...| 81.77 % [0.3 MB/s]</span>
<span class="s1">[TFile::Cp] Total 17.49 MB	|=================&gt;..| 87.22 % [0.3 MB/s]</span>
<span class="s1">[TFile::Cp] Total 17.49 MB	|==================&gt;.| 92.67 % [0.3 MB/s]</span>
<span class="s1">[TFile::Cp] Total 17.49 MB	|===================&gt;| 98.13 % [0.3 MB/s]</span>
<span class="s1">[TFile::Cp] Total 17.49 MB	|====================| 100.00 % [0.3 MB/s]</span>
<span class="s1">[TFile::Cp] Total 0.59 MB	|&gt;...................| 0.00 % [0.0 MB/s]</span>
<span class="s1">[TFile::Cp] Total 0.59 MB	|====================| 100.00 % [0.2 MB/s]</span>
<span class="s1">[TFile::Cp] Total 0.16 MB	|&gt;...................| 0.00 % [0.0 MB/s]</span>
<span class="s1">[TFile::Cp] Total 0.16 MB	|====================| 100.00 % [0.2 MB/s]</span>
<span class="s1">[TFile::Cp] Total 0.01 MB	|&gt;...................| 0.00 % [0.0 MB/s]</span>
<span class="s1">[TFile::Cp] Total 0.01 MB	|====================| 100.00 % [0.0 MB/s]</span>
<span class="s1">[TFile::Cp] Total 0.01 MB	|&gt;...................| 0.00 % [0.0 MB/s]</span>
<span class="s1">[TFile::Cp] Total 0.01 MB	|====================| 100.00 % [0.0 MB/s]</span>
<span class="s1">[TFile::Cp] Total 0.01 MB	|&gt;...................| 0.00 % [0.0 MB/s]</span>
<span class="s1">[TFile::Cp] Total 0.01 MB	|====================| 100.00 % [0.0 MB/s]</span>
<span class="s1">[TFile::Cp] Total 0.01 MB	|&gt;...................| 0.00 % [0.0 MB/s]</span>
<span class="s1">[TFile::Cp] Total 0.01 MB	|====================| 100.00 % [0.0 MB/s]</span>
<span class="s1">[TFile::Cp] Total 0.01 MB	|&gt;...................| 0.00 % [0.0 MB/s]</span>
<span class="s1">[TFile::Cp] Total 0.01 MB	|====================| 100.00 % [0.0 MB/s]</span>
<span class="s1">[TFile::Cp] Total 0.02 MB	|&gt;...................| 0.00 % [0.0 MB/s]</span>
<span class="s1">[TFile::Cp] Total 0.02 MB	|====================| 100.00 % [0.0 MB/s]</span>
<span class="s1">[TFile::Cp] Total 0.02 MB	|&gt;...................| 0.00 % [0.0 MB/s]</span>
<span class="s1">[TFile::Cp] Total 0.02 MB	|====================| 100.00 % [0.0 MB/s]</span>
<span class="s1">[TFile::Cp] Total 0.05 MB	|&gt;...................| 0.00 % [0.0 MB/s]</span>
<span class="s1">[TFile::Cp] Total 0.05 MB	|====================| 100.00 % [0.1 MB/s]</span>
<span class="s1">[TFile::Cp] Total 0.01 MB	|&gt;...................| 0.00 % [0.0 MB/s]</span>
<span class="s1">[TFile::Cp] Total 0.01 MB	|====================| 100.00 % [0.0 MB/s]</span>
<span class="s1">[TFile::Cp] Total 0.02 MB	|&gt;...................| 0.00 % [0.0 MB/s]</span>
<span class="s1">[TFile::Cp] Total 0.02 MB	|====================| 100.00 % [0.1 MB/s]</span>
<span class="s1">[TFile::Cp] Total 2.27 MB	|&gt;...................| 0.00 % [0.0 MB/s]</span>
<span class="s1">[TFile::Cp] Total 2.27 MB	|========&gt;...........| 42.06 % [0.3 MB/s]</span>
<span class="s1">[TFile::Cp] Total 2.27 MB	|================&gt;...| 84.11 % [0.3 MB/s]</span>
<span class="s1">[TFile::Cp] Total 2.27 MB	|====================| 100.00 % [0.4 MB/s]</span>
<span class="s1">[TFile::Cp] Total 2.47 MB	|&gt;...................| 0.00 % [0.0 MB/s]</span>
<span class="s1">[TFile::Cp] Total 2.47 MB	|=======&gt;............| 38.59 % [0.8 MB/s]</span>
<span class="s1">[TFile::Cp] Total 2.47 MB	|===============&gt;....| 77.19 % [0.7 MB/s]</span>
<span class="s1">[TFile::Cp] Total 2.47 MB	|====================| 100.00 % [0.8 MB/s]</span>
<span class="s1">[TFile::Cp] Total 2.55 MB	|&gt;...................| 0.00 % [0.0 MB/s]</span>
<span class="s1">[TFile::Cp] Total 2.55 MB	|=======&gt;............| 37.35 % [0.9 MB/s]</span>
<span class="s1">[TFile::Cp] Total 2.55 MB	|==============&gt;.....| 74.69 % [0.7 MB/s]</span>
<span class="s1">[TFile::Cp] Total 2.55 MB	|====================| 100.00 % [0.7 MB/s]</span>
<span class="s1">[TFile::Cp] Total 0.02 MB	|&gt;...................| 0.00 % [0.0 MB/s]</span>
<span class="s1">[TFile::Cp] Total 0.02 MB	|====================| 100.00 % [0.1 MB/s]</span>
<span class="s1">[TFile::Cp] Total 0.60 MB	|&gt;...................| 0.00 % [0.0 MB/s]</span>
<span class="s1">[TFile::Cp] Total 0.60 MB	|====================| 100.00 % [0.3 MB/s]</span>
<span class="s1">[TFile::Cp] Total 0.14 MB	|&gt;...................| 0.00 % [0.0 MB/s]</span>
<span class="s1">[TFile::Cp] Total 0.14 MB	|====================| 100.00 % [0.3 MB/s]</span>
<span class="s1">[TFile::Cp] Total 0.09 MB	|&gt;...................| 0.00 % [0.0 MB/s]</span>
<span class="s1">[TFile::Cp] Total 0.09 MB	|====================| 100.00 % [0.2 MB/s]</span>
<span class="s1">[TFile::Cp] Total 0.04 MB	|&gt;...................| 0.00 % [0.0 MB/s]</span>
<span class="s1">[TFile::Cp] Total 0.04 MB	|====================| 100.00 % [0.1 MB/s]</span>
<span class="s1">[TFile::Cp] Total 0.08 MB	|&gt;...................| 0.00 % [0.0 MB/s]</span>
<span class="s1">[TFile::Cp] Total 0.08 MB	|====================| 100.00 % [0.1 MB/s]</span>
<span class="s1">[TFile::Cp] Total 0.31 MB	|&gt;...................| 0.00 % [0.0 MB/s]</span>
<span class="s1">[TFile::Cp] Total 0.31 MB	|====================| 100.00 % [0.1 MB/s]</span>
<span class="s1">[TFile::Cp] Total 0.00 MB	|&gt;...................| 0.00 % [0.0 MB/s]</span>
<span class="s1">[TFile::Cp] Total 0.00 MB	|====================| 100.00 % [0.0 MB/s]</span>
<span class="s1">[TFile::Cp] Total 0.00 MB	|&gt;...................| 0.00 % [0.0 MB/s]</span>
<span class="s1">[TFile::Cp] Total 0.00 MB	|====================| 100.00 % [0.0 MB/s]</span>
<span class="s1">[TFile::Cp] Total 0.00 MB	|&gt;...................| 0.00 % [0.0 MB/s]</span>
<span class="s1">[TFile::Cp] Total 0.00 MB	|====================| 100.00 % [0.0 MB/s]</span>
<span class="s1">Traceback (most recent call last):</span>
<span class="s1">  File &quot;../source/analysis/share/ATestRun_eljob.py&quot;, line 91, in &lt;module&gt;</span>
<span class="s1">    driver.submit(job, options.submission_dir)</span>
<span class="ne">Exception</span>: string EL::Driver::submit(const EL::Job&amp; job, const string&amp; location) =&gt;
<span class="s1">    failed to submit job (C++ exception of type runtime_error)</span>
<span class="s1">&#39;</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">electrons</span><span class="o">.</span><span class="n">pt</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="nb">range</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Electron $p_T$ [GeV]&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Number of electrons&#39;</span><span class="p">)</span>
<span class="n">_</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Electron $p_T$ distribution for $Z</span><span class="se">\\</span><span class="s1">rightarrow ee$ events&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="electron-types">
<h2>Electron Types<a class="headerlink" href="#electron-types" title="Permalink to this headline">¶</a></h2>
<p>Electrons come in several different flavors. We can look at the different <span class="math notranslate nohighlight">\(\eta\)</span> distributions for the electrons. Isolation is another axis we can alter, not shown here, by changing the <code class="docutils literal notranslate"><span class="pre">isolation</span></code> argument to <code class="docutils literal notranslate"><span class="pre">Electrons</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">electrons</span> <span class="o">=</span> <span class="p">(</span><span class="n">ds</span>
             <span class="o">.</span><span class="n">Select</span><span class="p">(</span><span class="k">lambda</span> <span class="n">e</span><span class="p">:</span> <span class="p">{</span>
                 <span class="s1">&#39;tight_eta&#39;</span><span class="p">:</span> <span class="n">e</span><span class="o">.</span><span class="n">Electrons</span><span class="p">(</span><span class="s2">&quot;Electrons&quot;</span><span class="p">,</span> <span class="n">working_point</span><span class="o">=</span><span class="s1">&#39;TightLHElectron&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">Select</span><span class="p">(</span><span class="k">lambda</span> <span class="n">m</span><span class="p">:</span> <span class="n">m</span><span class="o">.</span><span class="n">eta</span><span class="p">()),</span>
                 <span class="s1">&#39;loose_eta&#39;</span><span class="p">:</span> <span class="n">e</span><span class="o">.</span><span class="n">Electrons</span><span class="p">(</span><span class="s2">&quot;Electrons&quot;</span><span class="p">,</span> <span class="n">working_point</span><span class="o">=</span><span class="s1">&#39;LooseLHElectron&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">Select</span><span class="p">(</span><span class="k">lambda</span> <span class="n">m</span><span class="p">:</span> <span class="n">m</span><span class="o">.</span><span class="n">eta</span><span class="p">()),</span>
                 <span class="s1">&#39;medium_eta&#39;</span><span class="p">:</span> <span class="n">e</span><span class="o">.</span><span class="n">Electrons</span><span class="p">(</span><span class="s2">&quot;Electrons&quot;</span><span class="p">,</span> <span class="n">working_point</span><span class="o">=</span><span class="s1">&#39;MediumLHElectron&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">Select</span><span class="p">(</span><span class="k">lambda</span> <span class="n">m</span><span class="p">:</span> <span class="n">m</span><span class="o">.</span><span class="n">eta</span><span class="p">()),</span>
                 <span class="p">})</span>
             <span class="o">.</span><span class="n">AsAwkwardArray</span><span class="p">()</span>
             <span class="o">.</span><span class="n">value</span><span class="p">())</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">ak</span><span class="o">.</span><span class="n">flatten</span><span class="p">(</span><span class="n">electrons</span><span class="o">.</span><span class="n">loose_eta</span><span class="p">),</span> <span class="n">bins</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="nb">range</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;loose&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">ak</span><span class="o">.</span><span class="n">flatten</span><span class="p">(</span><span class="n">electrons</span><span class="o">.</span><span class="n">medium_eta</span><span class="p">),</span> <span class="n">bins</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="nb">range</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;medium&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">ak</span><span class="o">.</span><span class="n">flatten</span><span class="p">(</span><span class="n">electrons</span><span class="o">.</span><span class="n">tight_eta</span><span class="p">),</span> <span class="n">bins</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="nb">range</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;tight&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Electron $</span><span class="se">\\</span><span class="s1">eta$&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Number of electrons&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Electron type $</span><span class="se">\\</span><span class="s1">eta$ distribution for $Z</span><span class="se">\\</span><span class="s1">rightarrow ee$ events&#39;</span><span class="p">)</span>
<span class="n">_</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="calibration">
<h2>Calibration<a class="headerlink" href="#calibration" title="Permalink to this headline">¶</a></h2>
<p>By default the muons we pulled are <code class="docutils literal notranslate"><span class="pre">Medium</span></code> quality and calibrated. One can request different systematic errors using the <code class="docutils literal notranslate"><span class="pre">calibration</span></code> argument to the <code class="docutils literal notranslate"><span class="pre">Muons</span></code> method.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">electrons</span> <span class="o">=</span> <span class="p">(</span><span class="n">ds</span>
             <span class="o">.</span><span class="n">Select</span><span class="p">(</span><span class="k">lambda</span> <span class="n">e</span><span class="p">:</span> <span class="n">e</span><span class="o">.</span><span class="n">Electrons</span><span class="p">(</span><span class="s2">&quot;Electrons&quot;</span><span class="p">))</span>
             <span class="o">.</span><span class="n">Select</span><span class="p">(</span><span class="k">lambda</span> <span class="n">eles</span><span class="p">:</span> <span class="p">{</span>
                 <span class="s1">&#39;pt&#39;</span><span class="p">:</span> <span class="n">eles</span><span class="o">.</span><span class="n">Select</span><span class="p">(</span><span class="k">lambda</span> <span class="n">e</span><span class="p">:</span> <span class="n">e</span><span class="o">.</span><span class="n">pt</span><span class="p">()</span> <span class="o">/</span> <span class="mf">1000.0</span><span class="p">),</span>
                 <span class="s1">&#39;eta&#39;</span><span class="p">:</span> <span class="n">eles</span><span class="o">.</span><span class="n">Select</span><span class="p">(</span><span class="k">lambda</span> <span class="n">e</span><span class="p">:</span> <span class="n">e</span><span class="o">.</span><span class="n">eta</span><span class="p">()),</span>
                 <span class="s1">&#39;phi&#39;</span><span class="p">:</span> <span class="n">eles</span><span class="o">.</span><span class="n">Select</span><span class="p">(</span><span class="k">lambda</span> <span class="n">e</span><span class="p">:</span> <span class="n">e</span><span class="o">.</span><span class="n">phi</span><span class="p">()),</span>
             <span class="p">})</span>
             <span class="o">.</span><span class="n">AsAwkwardArray</span><span class="p">()</span>
             <span class="o">.</span><span class="n">value</span><span class="p">())</span>
</pre></div>
</div>
</div>
</div>
<p>To grab the raw jets (without calibration) we just set the <code class="docutils literal notranslate"><span class="pre">calibrated</span></code> parameter to <code class="docutils literal notranslate"><span class="pre">False</span></code> (there is very little reason one will do this normally):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">raw_electrons</span> <span class="o">=</span> <span class="p">(</span><span class="n">ds</span>
                 <span class="o">.</span><span class="n">Select</span><span class="p">(</span><span class="k">lambda</span> <span class="n">e</span><span class="p">:</span> <span class="n">e</span><span class="o">.</span><span class="n">Electrons</span><span class="p">(</span><span class="s2">&quot;Electrons&quot;</span><span class="p">,</span> <span class="n">calibration</span><span class="o">=</span><span class="kc">None</span><span class="p">))</span>
                 <span class="o">.</span><span class="n">Select</span><span class="p">(</span><span class="k">lambda</span> <span class="n">eles</span><span class="p">:</span> <span class="p">{</span>
                     <span class="s1">&#39;pt&#39;</span><span class="p">:</span> <span class="n">eles</span><span class="o">.</span><span class="n">Select</span><span class="p">(</span><span class="k">lambda</span> <span class="n">j</span><span class="p">:</span> <span class="n">j</span><span class="o">.</span><span class="n">pt</span><span class="p">()</span> <span class="o">/</span> <span class="mf">1000.0</span><span class="p">),</span>
                     <span class="s1">&#39;eta&#39;</span><span class="p">:</span> <span class="n">eles</span><span class="o">.</span><span class="n">Select</span><span class="p">(</span><span class="k">lambda</span> <span class="n">j</span><span class="p">:</span> <span class="n">j</span><span class="o">.</span><span class="n">eta</span><span class="p">()),</span>
                     <span class="s1">&#39;phi&#39;</span><span class="p">:</span> <span class="n">eles</span><span class="o">.</span><span class="n">Select</span><span class="p">(</span><span class="k">lambda</span> <span class="n">j</span><span class="p">:</span> <span class="n">j</span><span class="o">.</span><span class="n">phi</span><span class="p">()),</span>
                 <span class="p">})</span>
                 <span class="o">.</span><span class="n">AsAwkwardArray</span><span class="p">()</span>
                 <span class="o">.</span><span class="n">value</span><span class="p">())</span>
</pre></div>
</div>
</div>
</div>
<p>The number of raw jets and the number of calibrated jets are quite different from the number of raw jets, so we’ll need to match them in <span class="math notranslate nohighlight">\(\eta\)</span> and <span class="math notranslate nohighlight">\(\phi\)</span>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">raw_electrons_matched</span> <span class="o">=</span> <span class="n">match_objects</span><span class="p">(</span><span class="n">electrons</span><span class="p">,</span> <span class="n">raw_electrons</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Note the units along the x-axis here!! We are using <strong>MeV</strong> not <em>GeV</em>!</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">ak</span><span class="o">.</span><span class="n">flatten</span><span class="p">(</span><span class="n">electrons</span><span class="o">.</span><span class="n">pt</span><span class="o">-</span><span class="n">raw_electrons_matched</span><span class="o">.</span><span class="n">pt</span><span class="p">),</span> <span class="n">bins</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="nb">range</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;$\Delta p_T$ for calibrated electrons matched to their raw electrons [MeV]&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Number of electrons&#39;</span><span class="p">)</span>
<span class="n">_</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;The effect of electron calibration on muon $p_T$ in $Z</span><span class="se">\\</span><span class="s1">rightarrow ee$ events&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>If we instead want a particular systematic error, we need only name that error to get it back. Knowing what the names of the systematic errors, however, is not something that can be programmatically determined ahead of time. See the further information section at the end of this chapter to links to the ATLAS muon calibration info twiki.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sys_electrons</span> <span class="o">=</span> <span class="p">(</span><span class="n">ds</span>
                 <span class="o">.</span><span class="n">Select</span><span class="p">(</span><span class="k">lambda</span> <span class="n">e</span><span class="p">:</span> <span class="n">e</span><span class="o">.</span><span class="n">Electrons</span><span class="p">(</span><span class="s2">&quot;Electrons&quot;</span><span class="p">,</span> <span class="n">calibration</span><span class="o">=</span><span class="s2">&quot;EG_RESOLUTION_ALL__1up&quot;</span><span class="p">))</span>
                 <span class="o">.</span><span class="n">Select</span><span class="p">(</span><span class="k">lambda</span> <span class="n">eles</span><span class="p">:</span> <span class="p">{</span>
                      <span class="s1">&#39;pt&#39;</span><span class="p">:</span> <span class="n">eles</span><span class="o">.</span><span class="n">Select</span><span class="p">(</span><span class="k">lambda</span> <span class="n">j</span><span class="p">:</span> <span class="n">j</span><span class="o">.</span><span class="n">pt</span><span class="p">()</span> <span class="o">/</span> <span class="mf">1000.0</span><span class="p">),</span>
                      <span class="s1">&#39;eta&#39;</span><span class="p">:</span> <span class="n">eles</span><span class="o">.</span><span class="n">Select</span><span class="p">(</span><span class="k">lambda</span> <span class="n">j</span><span class="p">:</span> <span class="n">j</span><span class="o">.</span><span class="n">eta</span><span class="p">()),</span>
                      <span class="s1">&#39;phi&#39;</span><span class="p">:</span> <span class="n">eles</span><span class="o">.</span><span class="n">Select</span><span class="p">(</span><span class="k">lambda</span> <span class="n">j</span><span class="p">:</span> <span class="n">j</span><span class="o">.</span><span class="n">phi</span><span class="p">()),</span>
                      <span class="p">})</span>
                 <span class="o">.</span><span class="n">AsAwkwardArray</span><span class="p">()</span>
                 <span class="o">.</span><span class="n">value</span><span class="p">())</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sys_electrons_match</span> <span class="o">=</span> <span class="n">match_objects</span><span class="p">(</span><span class="n">electrons</span><span class="p">,</span> <span class="n">sys_electrons</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">ak</span><span class="o">.</span><span class="n">flatten</span><span class="p">(</span><span class="n">electrons</span><span class="o">.</span><span class="n">pt</span><span class="o">-</span><span class="n">sys_electrons_match</span><span class="o">.</span><span class="n">pt</span><span class="p">),</span> <span class="n">bins</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="nb">range</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;$\Delta p_T$ for calibrated electrons matched to their reco stat muons [GeV]&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Number of Electrons&#39;</span><span class="p">)</span>
<span class="n">_</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;The effect of a electron calibration sys error on muon $p_T$ in $Z</span><span class="se">\\</span><span class="s1">rightarrow ee$ events&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="the-data-model">
<h2>The Data Model<a class="headerlink" href="#the-data-model" title="Permalink to this headline">¶</a></h2>
<p>The data model when this documentation was last built is.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">func_adl_servicex_xaodr21.xAOD.electron_v1</span> <span class="kn">import</span> <span class="n">Electron_v1</span>
<span class="n">help</span><span class="p">(</span><span class="n">Electron_v1</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="further-information">
<h2>Further Information<a class="headerlink" href="#further-information" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>The <a class="reference external" href="https://gitlab.cern.ch/atlas/athena/-/blob/21.2/Event/xAOD/xAODEgamma/xAODEgamma/versions/Electron_v1.h"><code class="docutils literal notranslate"><span class="pre">xAOD::Electron_v1</span></code> C++ header file</a> with all the inline documentation.</p></li>
<li><p>The <a class="reference external" href="https://twiki.cern.ch/twiki/bin/view/AtlasProtected/LatestRecommendationsElectronIDRun2">Electron Recommendation Pages for R21</a> on the ATLAS TWiki</p></li>
<li><p>The <a class="reference external" href="https://twiki.cern.ch/twiki/bin/view/AtlasProtected/EGammaIdentificationRun2">Electron Working Points Pages for R21</a> on the ATLAS Twiki</p></li>
</ul>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./chapters"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        
            



<div class='prev-next-bottom'>
    

</div>
        
        </div>
    </div>
    <footer class="footer">
    <div class="container">
      <p>
        
          By IRIS-HEP (Gordon Watts)<br/>
        
            &copy; Copyright 2021.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>
  
  <script src="../_static/js/index.1c5a1a01449ed65a7b51.js"></script>

  
  </body>
</html>